diff -u -r -N pdksh-5.2.14/Makefile pdksh-aros/Makefile
--- pdksh-5.2.14/Makefile	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/Makefile	Tue Mar 30 20:23:21 2004
@@ -0,0 +1,330 @@
+# Generated automatically from Makefile.in by configure.
+#
+#  Generated automatically from Makefile.in by configure.
+#
+
+srcdir = .
+
+CC = /usr/local/i386-aros/bin/gcc
+CPP = /usr/local/i386-aros/bin/gcc -E
+
+INSTALL = /usr/bin/install -c
+INSTALL_PROGRAM = ${INSTALL}
+INSTALL_DATA = ${INSTALL} -m 644
+
+DEFS = -DHAVE_CONFIG_H
+LIBS = 
+
+CPPFLAGS = 
+CFLAGS = -g -O
+LDSTATIC = 
+LDFLAGS = 
+
+SHELL_PROG = ksh
+
+prefix = /usr/local
+exec_prefix = ${prefix}
+transform=s,x,x,
+
+bindir = $(exec_prefix)/bin
+mandir = $(prefix)/man/man$(manext)
+manext = 1
+
+# Suffix for executables: nothing for unix, .exe for os/2.
+exe_suffix=
+
+SHELL = /bin/sh
+
+SRCS = alloc.c c_ksh.c c_sh.c c_test.c c_ulimit.c edit.c emacs.c \
+	eval.c exec.c expr.c history.c io.c jobs.c lex.c mail.c \
+	main.c misc.c missing.c path.c shf.c sigact.c syn.c table.c trap.c \
+	tree.c tty.c var.c version.c vi.c
+OBJS = alloc.o c_ksh.o c_sh.o c_test.o c_ulimit.o edit.o emacs.o \
+	eval.o exec.o expr.o history.o io.o jobs.o lex.o mail.o \
+	main.o misc.o missing.o path.o shf.o sigact.o syn.o table.o trap.o \
+	tree.o tty.o var.o version.o vi.o
+HDRS = c_test.h edit.h expand.h ksh_dir.h ksh_limval.h ksh_stat.h ksh_time.h \
+	ksh_times.h ksh_wait.h lex.h proto.h sh.h shf.h sigact.h \
+	table.h tree.h tty.h
+DISTFILES = $(SRCS) $(HDRS) ksh.Man Makefile.in configure.in \
+	config.h.in conf-end.h acconfig.h aclocal.m4 emacs-gen.sh \
+	mkinstalldirs install-sh new-version.sh siglist.in siglist.sh mkman \
+	check-fd.c check-pgrp.c check-sigs.c \
+	README NEWS CONTRIBUTORS LEGAL PROJECTS INSTALL NOTES BUG-REPORTS \
+	IAFA-PACKAGE ChangeLog ChangeLog.0 configure stamp-h.in
+# ETCFILES also disted, but handled differently
+ETCFILES = etc/ksh.kshrc etc/profile etc/sys_config.sh
+# MISCFILES also disted, but handled differently
+MISCFILES = misc/ChangeLog.sjg misc/Changes.jrm misc/Changes.mlj \
+	misc/Changes.pc misc/README.sjg misc/ReadMe.eg misc/ReadMe.emacs \
+	misc/ReadMe.jrm misc/Bugs 
+# TESTFILES also disted, but handled differently
+TESTFILES = tests/README tests/th tests/th-sh tests/alias.t tests/arith.t \
+	tests/bksl-nl.t tests/brkcont.t tests/cdhist.t tests/eglob.t \
+	tests/glob.t tests/heredoc.t tests/history.t tests/ifs.t \
+	tests/integer.t tests/lineno.t tests/read.t tests/regress.t \
+	tests/syntax.t tests/unclass1.t tests/unclass2.t \
+	tests/version.t 
+# OS2FILES also disted, but handled differently
+OS2FILES = os2/Makefile os2/config.h os2/config.status os2/configure.cmd \
+	os2/emacs.out os2/kshrc.ksh os2/make.sed os2/os2.c os2/os2siglist.out \
+	os2/README.os2 os2/NEWS.os2 os2/os2bugs os2/th.cmd os2/config.cache
+
+all: $(SHELL_PROG)$(exe_suffix) $(SHELL_PROG).1
+
+# This shouldn't be first - some makes don't know about PRECIOUS and assume it
+# is the default target.
+.PRECIOUS: configure config.h.in Makefile config.status
+
+.c.o:
+	$(CC) -c $(CPPFLAGS) $(DEFS) -I. -I$(srcdir) $(CFLAGS) $<
+
+install: installdirs all
+	$(INSTALL_PROGRAM) $(SHELL_PROG)$(exe_suffix) $(bindir)/`echo $(SHELL_PROG)|sed '$(transform)'`$(exe_suffix)
+	-$(INSTALL_DATA) $(SHELL_PROG).1 $(mandir)/`echo $(SHELL_PROG)|sed '$(transform)'`.$(manext)
+	-@prog=$(bindir)/`echo $(SHELL_PROG)|sed '$(transform)'`$(exe_suffix);\
+	    test -f /etc/shells \
+	    && (grep "^$$prog\$$" /etc/shells > /dev/null \
+		|| echo \
+"NOTE: /etc/shells does not contain $$prog \
+      you should add it if you want to set your shell to $(SHELL_PROG)")
+
+installdirs:
+	$(srcdir)/mkinstalldirs $(bindir) $(mandir)
+
+uninstall:
+	rm -f $(bindir)/`echo $(SHELL_PROG)|sed '$(transform)'`$(exe_suffix)
+	rm -f $(mandir)/`echo $(SHELL_PROG)|sed '$(transform)'`.$(manext)
+
+check test:
+	$(srcdir)/tests/th-sh $(srcdir)/tests/th -s $(srcdir)/tests -p ./$(SHELL_PROG)$(exe_suffix) -C pdksh,sh,ksh,posix,posix-upu $(TESTARGS)
+
+$(SHELL_PROG)$(exe_suffix): $(OBJS)
+	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)
+
+# two steps to prevent the creation of a bogus tmpksh.1
+$(SHELL_PROG).1: $(srcdir)/ksh.Man
+	$(srcdir)/mkman $(SHELL_PROG) $(srcdir)/ksh.Man > tmpksh.1
+	mv tmpksh.1 $(SHELL_PROG).1
+
+info:
+	@echo "No info (yet)"
+
+dvi:
+
+$(srcdir)/configure: configure.in aclocal.m4
+	cd $(srcdir) && autoconf
+
+$(srcdir)/config.h.in: stamp-h.in
+$(srcdir)/stamp-h.in: configure.in aclocal.m4 acconfig.h
+	cd $(srcdir) && autoheader
+	date > $(srcdir)/stamp-h.in
+
+config.h: stamp-h
+stamp-h: config.h.in config.status
+	CONFIG_FILES="" CONFIG_HEADERS=config.h ./config.status
+	date > stamp-h
+
+Makefile: Makefile.in config.status
+	CONFIG_FILES=Makefile CONFIG_HEADERS= ./config.status
+
+config.status: configure
+	LDSTATIC="$(LDSTATIC)" ./config.status --recheck
+
+# two steps to prevent the creation of a bogus siglist.out
+siglist.out: config.h sh.h siglist.in siglist.sh
+	$(srcdir)/siglist.sh "$(CPP) $(CPPFLAGS) $(DEFS) -I. -I$(srcdir)" < $(srcdir)/siglist.in > tmpsiglist.out
+	mv tmpsiglist.out siglist.out
+
+# two steps to prevent the creation of a bogus emacs.out
+emacs.out: emacs.c
+	$(srcdir)/emacs-gen.sh $(srcdir)/emacs.c > tmpemacs.out
+	mv tmpemacs.out emacs.out
+
+debugtools: check-fd$(exe_suffix) check-sigs$(exe_suffix) \
+	check-pgrp$(exe_suffix)
+
+check-fd.o check-pgrp.o check-sigs.o: config.h
+check-fd$(exe_suffix): check-fd.o
+	$(CC) $(LDFLAGS) -o $@ check-fd.o $(LIBS)
+
+check-pgrp$(exe_suffix): check-pgrp.o
+	$(CC) $(LDFLAGS) -o $@ check-pgrp.o $(LIBS)
+
+check-sigs$(exe_suffix): check-sigs.o
+	$(CC) $(LDFLAGS) -o $@ check-sigs.o $(LIBS)
+
+TAGS: $(SRCS) $(HDRS)
+	cd $(srcdir) && etags $(SRCS) $(HDRS)
+
+tags: $(SRCS) $(HDRS)
+	cd $(srcdir) && ctags -wt $(SRCS) $(HDRS)
+
+clean:
+	rm -f ksh$(exe_suffix) sh$(exe_suffix) ksh.1 sh.1 $(OBJS) siglist.out \
+	      emacs.out core a.out mon.out gmon.out \
+	      version.c.bak Makefile.bak Makefile.tmp check-fd$(exe_suffix) \
+	      check-pgrp$(exe_suffix) check-sigs$(exe_suffix)
+
+mostlyclean: clean
+
+distclean: clean
+	rm -f Makefile config.h stamp-h config.status config.log config.cache \
+	      tags TAGS *~
+
+realclean: distclean
+
+dist: $(DISTFILES) $(ETCFILES) $(MISCFILES) $(TESTFILES) $(OS2FILES)
+	cd $(srcdir) && \
+	  { \
+	    ./new-version.sh; \
+	    FNAME=pdksh-`sed -e '/"@(.)/!d' \
+		    -e 's/[^0-9]*\([0-9.]*\).*/\1/' -e q version.c`; \
+	    if test `echo $$FNAME|tr . ' '|wc -w|sed 's/[       ]*//g'` -gt 3; \
+	    then \
+		FNAME=`echo $$FNAME | sed 's/pdksh-/pdksh-unstable-/'`; \
+	    fi; \
+	    echo Creating version $$FNAME; \
+	    rm -rf $$FNAME; \
+	    mkdir $$FNAME $$FNAME/etc $$FNAME/misc $$FNAME/tests $$FNAME/os2; \
+	    cp -p $(DISTFILES) $$FNAME; \
+	    cp -p $(ETCFILES) $$FNAME/etc; \
+	    cp -p $(MISCFILES) $$FNAME/misc; \
+	    cp -p $(TESTFILES) $$FNAME/tests; \
+	    cp -p $(OS2FILES) $$FNAME/os2; \
+	    ./emacs-gen.sh emacs.c > os2/emacs.out; \
+	    test -x ./Dist-fixup && ./Dist-fixup $$FNAME; \
+	    sed -f os2/make.sed < $$FNAME/Makefile.in > $$FNAME/os2/Makefile; \
+	    chmod -R a+rX,u+w,og-w $$FNAME; \
+	    tar chzf $$FNAME.tar.gz $$FNAME; \
+	    find $$FNAME -print | xargs pathchk -p; \
+	  }
+
+depend: $(SRCS)
+	sed -n '1,/[ ]PUT ANYTHING BELOW THIS LINE/p' < Makefile > Makefile.tmp
+	srcs=; for i in $(SRCS) ; do srcs="$$srcs $(srcdir)/$$i"; done; \
+	  $(CC) -M $(DEFS) -I. -I$(srcdir) $(CFLAGS) $$srcs | \
+	    sed -e 's?[ 	]/[^ 	]*??g' -e 's?[ 	]./? ?g' \
+		-e 's?[ 	]$(srcdir)//*? ?g' -e 's?^$(srcdir)//*??' \
+		-e '/^[ 	]*\\[	 ]*$$/d' -e '/^[^:]*:[	 ]*$$/d' \
+		-e 's/^\([	 ]*\)$$/ sh.h/' \
+	    >> Makefile.tmp
+	mv Makefile.tmp Makefile
+	@echo 'Make depend done (stopping make)'; false
+
+# DON'T PUT ANYTHING BELOW THIS LINE (and don't delete it - its for make depend)
+alloc.o: alloc.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h
+c_ksh.o: c_ksh.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h \
+ sh.h
+c_sh.o: c_sh.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_time.h \
+ ksh_times.h \
+ sh.h
+c_test.o: c_test.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h c_test.h
+c_ulimit.o: c_ulimit.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_time.h \
+ sh.h
+edit.o: edit.c config.h conf-end.h sh.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h tty.h \
+ edit.h \
+ ksh_stat.h
+emacs.o: emacs.c config.h conf-end.h sh.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_dir.h \
+ edit.h emacs.out
+eval.o: eval.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h \
+ ksh_dir.h \
+ ksh_stat.h
+exec.o: exec.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h c_test.h \
+ ksh_stat.h
+expr.o: expr.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h \
+ sh.h
+history.o: history.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h
+io.o: io.c \
+ sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h
+jobs.o: jobs.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_wait.h \
+ ksh_times.h ksh_time.h \
+ tty.h \
+ sh.h
+lex.o: lex.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h \
+ sh.h
+mail.o: mail.c config.h conf-end.h sh.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_time.h \
+ sh.h
+main.o: main.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_time.h \
+ sh.h
+misc.o: misc.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h \
+ sh.h
+missing.o: missing.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_dir.h \
+ ksh_time.h \
+ ksh_times.h \
+ sh.h
+path.o: path.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h
+shf.o: shf.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h ksh_limval.h \
+ sh.h
+sigact.o: sigact.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h
+syn.o: syn.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h c_test.h
+table.o: table.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h
+trap.o: trap.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h siglist.out
+tree.o: tree.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h
+tty.o: tty.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_stat.h tty.h \
+ sh.h
+var.o: var.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h ksh_time.h \
+ ksh_limval.h \
+ ksh_stat.h \
+ sh.h
+version.o: version.c sh.h config.h conf-end.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h
+vi.o: vi.c config.h conf-end.h sh.h \
+ shf.h table.h tree.h expand.h lex.h \
+ proto.h \
+ ksh_stat.h edit.h
diff -u -r -N pdksh-5.2.14/c_test.c pdksh-aros/c_test.c
--- pdksh-5.2.14/c_test.c	Wed Jun 30 16:15:31 1999
+++ pdksh-aros/c_test.c	Tue Mar 30 22:14:34 2004
@@ -338,7 +338,9 @@
 	  case TO_FILUID: /* -O */
 		return test_stat(opnd1, &b1) == 0 && b1.st_uid == ksheuid;
 	  case TO_FILGID: /* -G */
-		return test_stat(opnd1, &b1) == 0 && b1.st_gid == getegid();
+/*		return test_stat(opnd1, &b1) == 0 && b1.st_gid == getegid(); */
+/* AROS */
+		return test_stat(opnd1, &b1) == 0 && b1.st_gid == 0;
 	/*
 	 * Binary Operators
 	 */
diff -u -r -N pdksh-5.2.14/config.cache pdksh-aros/config.cache
--- pdksh-5.2.14/config.cache	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/config.cache	Tue Mar 30 20:23:21 2004
@@ -0,0 +1,98 @@
+# This file is a shell script that caches the results of configure
+# tests run on this system so they can be shared between configure
+# scripts and configure runs.  It is not useful on other systems.
+# If it contains results you don't want to keep, you may remove or edit it.
+#
+# By default, configure uses ./config.cache as the cache file,
+# creating it if it does not exist already.  You can give configure
+# the --cache-file=FILE option to use a different cache file; that is
+# what configure does when it calls configure scripts in
+# subdirectories, so they share the cache.
+# Giving --cache-file=/dev/null disables caching, for debugging configure.
+# config.status only pays attention to the cache file if you give it the
+# --recheck option to rerun configure.
+#
+ac_cv_func__setjmp=${ac_cv_func__setjmp=no}
+ac_cv_func_waitpid=${ac_cv_func_waitpid=no}
+ac_cv_func_tcsetpgrp=${ac_cv_func_tcsetpgrp=no}
+ac_cv_sizeof_int=${ac_cv_sizeof_int=0}
+ksh_cv_opendir_ok=${ksh_cv_opendir_ok=no}
+ac_cv_func_setrlimit=${ac_cv_func_setrlimit=no}
+ac_cv_func_getcwd=${ac_cv_func_getcwd=yes}
+ac_cv_type_clock_t=${ac_cv_type_clock_t=yes}
+ac_cv_header_stdlib_h=${ac_cv_header_stdlib_h=yes}
+ac_cv_func_valloc=${ac_cv_func_valloc=no}
+ac_cv_header_sys_time_h=${ac_cv_header_sys_time_h=yes}
+ksh_cv_func_times_ok=${ksh_cv_func_times_ok=no}
+ac_cv_path_install=${ac_cv_path_install='/usr/bin/install -c'}
+ac_cv_func_killpg=${ac_cv_func_killpg=no}
+ac_cv_func_wait3=${ac_cv_func_wait3=no}
+ac_cv_func_flock=${ac_cv_func_flock=no}
+ac_cv_header_dirent_dirent_h=${ac_cv_header_dirent_dirent_h=yes}
+ksh_cv_time_delcared=${ksh_cv_time_delcared=yes}
+ac_cv_decl_sys_siglist=${ac_cv_decl_sys_siglist=no}
+ksh_cv_func_lstat=${ksh_cv_func_lstat=yes}
+ksh_cv_signal_retval=${ksh_cv_signal_retval=}
+ac_cv_func_strcasecmp=${ac_cv_func_strcasecmp=yes}
+ac_cv_header_minix_config_h=${ac_cv_header_minix_config_h=no}
+ac_cv_func_nice=${ac_cv_func_nice=no}
+ac_cv_func_confstr=${ac_cv_func_confstr=no}
+ac_cv_header_fcntl_h=${ac_cv_header_fcntl_h=yes}
+ac_cv_c_const=${ac_cv_c_const=yes}
+ac_cv_func_strstr=${ac_cv_func_strstr=yes}
+ac_cv_prog_gcc_traditional=${ac_cv_prog_gcc_traditional=no}
+ac_cv_func_dup2=${ac_cv_func_dup2=yes}
+ac_cv_header_sys_resource_h=${ac_cv_header_sys_resource_h=no}
+ac_cv_lib_ndir_opendir=${ac_cv_lib_ndir_opendir=no}
+ac_cv_prog_CC=${ac_cv_prog_CC=/usr/local/i386-aros/bin/gcc}
+ksh_cv_c_func_attr=${ksh_cv_c_func_attr=yes}
+ac_cv_type_sigset_t=${ac_cv_type_sigset_t=yes}
+ac_cv_type_mode_t=${ac_cv_type_mode_t=yes}
+ac_cv_header_values_h=${ac_cv_header_values_h=yes}
+ac_cv_header_termio_h=${ac_cv_header_termio_h=no}
+ac_cv_func_getrusage=${ac_cv_func_getrusage=no}
+ksh_cv_os_type=${ksh_cv_os_type=no}
+ksh_cv_dev_fd=${ksh_cv_dev_fd=no}
+ac_cv_func_sysconf=${ac_cv_func_sysconf=no}
+ac_cv_func_getwd=${ac_cv_func_getwd=no}
+ac_cv_header_limits_h=${ac_cv_header_limits_h=yes}
+ksh_cv_term_check=${ksh_cv_term_check=sgtty}
+ksh_cv_pgrp_check=${ksh_cv_pgrp_check=none}
+ac_cv_struct_st_rdev=${ac_cv_struct_st_rdev=yes}
+ksh_cv_func_memmove=${ksh_cv_func_memmove=no}
+ac_cv_header_ulimit_h=${ac_cv_header_ulimit_h=no}
+ksh_cv_signal_check=${ksh_cv_signal_check=posix}
+ac_cv_sys_interpreter=${ac_cv_sys_interpreter=yes}
+ac_cv_header_time=${ac_cv_header_time=yes}
+ac_cv_header_paths_h=${ac_cv_header_paths_h=no}
+ac_cv_func_ulimit=${ac_cv_func_ulimit=no}
+ac_cv_sizeof_long=${ac_cv_sizeof_long=0}
+ac_cv_type_signal=${ac_cv_type_signal=void}
+ac_cv_lib_dir_opendir=${ac_cv_lib_dir_opendir=no}
+ksh_cv_c_prototypes=${ksh_cv_c_prototypes=yes}
+ac_cv_func_mmap=${ac_cv_func_mmap=no}
+ac_cv_header_sys_param_h=${ac_cv_header_sys_param_h=yes}
+ac_cv_header_string_h=${ac_cv_header_string_h=yes}
+ksh_cv_var_sys_siglist=${ksh_cv_var_sys_siglist=no}
+ac_cv_header_memory_h=${ac_cv_header_memory_h=yes}
+ksh_cv_header_sys_wait_h=${ksh_cv_header_sys_wait_h=yes}
+ac_cv_prog_gcc=${ac_cv_prog_gcc=yes}
+ac_cv_func_strerror=${ac_cv_func_strerror=yes}
+ac_cv_type_off_t=${ac_cv_type_off_t=yes}
+ac_cv_header_stat_broken=${ac_cv_header_stat_broken=no}
+ac_cv_type_pid_t=${ac_cv_type_pid_t=yes}
+ac_cv_prog_gcc_g=${ac_cv_prog_gcc_g=yes}
+ksh_cv_c_void=${ksh_cv_c_void=yes}
+ksh_cv_func_memset=${ksh_cv_func_memset=yes}
+ac_cv_prog_CPP=${ac_cv_prog_CPP='/usr/local/i386-aros/bin/gcc -E'}
+ksh_cv_c_volatile=${ksh_cv_c_volatile=yes}
+ksh_cv_var_sys_errlist=${ksh_cv_var_sys_errlist=no}
+ac_cv_func_getpagesize=${ac_cv_func_getpagesize=no}
+ac_cv_type_rlim_t=${ac_cv_type_rlim_t=yes}
+ksh_cv_decl_sys_errlist=${ksh_cv_decl_sys_errlist=no}
+ac_cv_func_sigsetjmp=${ac_cv_func_sigsetjmp=no}
+ac_cv_header_stddef_h=${ac_cv_header_stddef_h=yes}
+ac_cv_type_uid_t=${ac_cv_type_uid_t=yes}
+ksh_cv_header_unistd=${ksh_cv_header_unistd=yes}
+ksh_cv_dup2_clexec_ok=${ksh_cv_dup2_clexec_ok=no}
+ksh_cv_func_bcopy=${ksh_cv_func_bcopy=no}
diff -u -r -N pdksh-5.2.14/config.h pdksh-aros/config.h
--- pdksh-5.2.14/config.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/config.h	Tue Mar 30 20:23:21 2004
@@ -0,0 +1,361 @@
+/* config.h.  Generated automatically by configure.  */
+/* config.h.in.  Generated automatically from configure.in by autoheader.  */
+/*
+ * This file, acconfig.h, which is a part of pdksh (the public domain ksh),
+ * is placed in the public domain.  It comes with no licence, warranty
+ * or guarantee of any kind (i.e., at your own risk).
+ */
+
+#ifndef CONFIG_H
+#define CONFIG_H
+
+
+/* Define if on AIX 3.
+   System headers sometimes define this.
+   We just want to avoid a redefinition error message.  */
+#ifndef _ALL_SOURCE
+/* #undef _ALL_SOURCE */
+#endif
+
+/* Define if the closedir function returns void instead of int.  */
+/* #undef CLOSEDIR_VOID */
+
+/* Define to empty if the keyword does not work.  */
+/* #undef const */
+
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef gid_t */
+
+/* Define if you have a working `mmap' system call.  */
+/* #undef HAVE_MMAP */
+
+/* Define if your struct stat has st_rdev.  */
+#define HAVE_ST_RDEV 1
+
+/* Define if you have <sys/wait.h> that is POSIX.1 compatible.  */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define if you have <unistd.h>.  */
+#define HAVE_UNISTD_H 1
+
+/* Define if on MINIX.  */
+/* #undef _MINIX */
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef mode_t */
+
+/* Define to `long' if <sys/types.h> doesn't define.  */
+/* #undef off_t */
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef pid_t */
+
+/* Define if the system does not provide POSIX.1 features except
+   with this defined.  */
+/* #undef _POSIX_1_SOURCE */
+
+/* Define if you need to in order for stat and other things to work.  */
+/* #undef _POSIX_SOURCE */
+
+/* Define as the return type of signal handlers (int or void).  */
+#define RETSIGTYPE void
+
+/* Define if the `S_IS*' macros in <sys/stat.h> do not work properly.  */
+/* #undef STAT_MACROS_BROKEN */
+
+/* Define if `sys_siglist' is declared by <signal.h>.  */
+/* #undef SYS_SIGLIST_DECLARED */
+
+/* Define if you can safely include both <sys/time.h> and <time.h>.  */
+#define TIME_WITH_SYS_TIME 1
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+/* #undef uid_t */
+
+/* Define if the closedir function returns void instead of int.  */
+/* #undef VOID_CLOSEDIR */
+
+/* Define if your kernal doesn't handle scripts starting with #! */
+/* #undef SHARPBANG */
+
+/* Define if dup2() preserves the close-on-exec flag (ultrix does this) */
+#define DUP2_BROKEN 1
+
+/* Define as the return value of signal handlers (0 or ).  */
+#define RETSIGVAL 
+
+/* Define if you have posix signal routines (sigaction(), et. al.) */
+#define POSIX_SIGNALS 1
+
+/* Define if you have BSD4.2 signal routines (sigsetmask(), et. al.) */
+/* #undef BSD42_SIGNALS */
+
+/* Define if you have BSD4.1 signal routines (sigset(), et. al.) */
+/* #undef BSD41_SIGNALS */
+
+/* Define if you have v7 signal routines (signal(), signal reset on delivery) */
+/* #undef V7_SIGNALS */
+
+/* Define to use the fake posix signal routines (sigact.[ch]) */
+/* #undef USE_FAKE_SIGACT */
+
+/* Define if signals don't interrupt read() */
+/* #undef SIGNALS_DONT_INTERRUPT */
+
+/* Define if you have bsd versions of the setpgrp() and getpgrp() routines */
+/* #undef BSD_PGRP */
+
+/* Define if you have POSIX versions of the setpgid() and getpgrp() routines */
+/* #undef POSIX_PGRP */
+
+/* Define if you have sysV versions of the setpgrp() and getpgrp() routines */
+/* #undef SYSV_PGRP */
+
+/* Define if you don't have setpgrp(), setpgid() or getpgrp() routines */
+#define NO_PGRP 1
+
+/* Define to char if your compiler doesn't like the void keyword */
+/* #undef void */
+
+/* Define to nothing if compiler doesn't like the volatile keyword */
+/* #undef volatile */
+
+/* Define if C compiler groks function prototypes */
+#define HAVE_PROTOTYPES 1
+
+/* Define if C compiler groks __attribute__((...)) (const, noreturn, format) */
+#define HAVE_GCC_FUNC_ATTR 1
+
+/* Define to 32-bit signed integer type if <sys/types.h> doesn't define */
+/* #undef clock_t */
+
+/* Define to the type of struct rlimit fields if the rlim_t type is missing */
+/* #undef rlim_t */
+
+/* Define if time() is declared in <time.h> */
+#define TIME_DECLARED 1
+
+/* Define to `unsigned' if <signal.h> doesn't define */
+/* #undef sigset_t */
+
+/* Define if sys_errlist[] and sys_nerr are in the C library */
+/* #undef HAVE_SYS_ERRLIST */
+
+/* Define if sys_errlist[] and sys_nerr are defined in <errno.h> */
+/* #undef SYS_ERRLIST_DECLARED */
+
+/* Define if sys_siglist[] is in the C library */
+/* #undef HAVE_SYS_SIGLIST */
+
+/* Define if you have a sane <termios.h> header file */
+/* #undef HAVE_TERMIOS_H */
+
+/* Define if you have a memset() function in your C library */
+#define HAVE_MEMSET 1
+
+/* Define if you have a memmove() function in your C library */
+/* #undef HAVE_MEMMOVE */
+
+/* Define if you have a bcopy() function in your C library */
+/* #undef HAVE_BCOPY */
+
+/* Define if you have a lstat() function in your C library */
+#define HAVE_LSTAT 1
+
+/* Define if you have a sane <termio.h> header file */
+/* #undef HAVE_TERMIO_H */
+
+/* Define if you don't have times() or if it always returns 0 */
+#define TIMES_BROKEN 1
+
+/* Define if opendir() will open non-directory files */
+#define OPENDIR_DOES_NONDIR 1
+
+/* Define if the pgrp of setpgrp() can't be the pid of a zombie process */
+/* #undef NEED_PGRP_SYNC */
+
+/* Define if you arg running SCO unix */
+/* #undef OS_SCO */
+
+/* Define if you arg running ISC unix */
+/* #undef OS_ISC */
+
+/* Define if you arg running OS2 with the EMX library */
+/* #undef OS2 */
+
+/* Define if you have a POSIX.1 compatiable <sys/wait.h> */
+#define POSIX_SYS_WAIT 1
+
+/* Define if your OS maps references to /dev/fd/n to file descriptor n */
+/* #undef HAVE_DEV_FD */
+
+/* Define if your C library's getwd/getcwd function dumps core in unreadable
+ * directories.  */
+/* #undef HPUX_GETWD_BUG */
+
+/* Default PATH (see comments in configure.in for more details) */
+#define DEFAULT_PATH "/bin:/usr/bin:/usr/ucb"
+
+/* Include ksh features? (see comments in configure.in for more details) */
+#define KSH 1
+
+/* Include emacs editing? (see comments in configure.in for more details) */
+#define EMACS 1
+
+/* Include vi editing? (see comments in configure.in for more details) */
+#define VI 1
+
+/* Include job control? (see comments in configure.in for more details) */
+#define JOBS 1
+
+/* Include brace-expansion? (see comments in configure.in for more details) */
+#define BRACE_EXPAND 1
+
+/* Include any history? (see comments in configure.in for more details) */
+#define HISTORY 1
+
+/* Include complex history? (see comments in configure.in for more details) */
+/* #undef COMPLEX_HISTORY */
+
+/* Strict POSIX behaviour? (see comments in configure.in for more details) */
+/* #undef POSIXLY_CORRECT */
+
+/* Specify default $ENV? (see comments in configure.in for more details) */
+/* #undef DEFAULT_ENV */
+
+/* Include shl(1) support? (see comments in configure.in for more details) */
+/* #undef SWTCH */
+
+/* Include game-of-life? (see comments in configure.in for more details) */
+/* #undef SILLY */
+
+/* The number of bytes in a int.  */
+#define SIZEOF_INT 0
+
+/* The number of bytes in a long.  */
+#define SIZEOF_LONG 0
+
+/* Define if you have the _setjmp function.  */
+/* #undef HAVE__SETJMP */
+
+/* Define if you have the confstr function.  */
+/* #undef HAVE_CONFSTR */
+
+/* Define if you have the dup2 function.  */
+#define HAVE_DUP2 1
+
+/* Define if you have the flock function.  */
+/* #undef HAVE_FLOCK */
+
+/* Define if you have the getcwd function.  */
+#define HAVE_GETCWD 1
+
+/* Define if you have the getgroups function.  */
+/* #undef HAVE_GETGROUPS */
+
+/* Define if you have the getpagesize function.  */
+/* #undef HAVE_GETPAGESIZE */
+
+/* Define if you have the getrusage function.  */
+/* #undef HAVE_GETRUSAGE */
+
+/* Define if you have the getwd function.  */
+/* #undef HAVE_GETWD */
+
+/* Define if you have the killpg function.  */
+/* #undef HAVE_KILLPG */
+
+/* Define if you have the nice function.  */
+/* #undef HAVE_NICE */
+
+/* Define if you have the setrlimit function.  */
+/* #undef HAVE_SETRLIMIT */
+
+/* Define if you have the sigsetjmp function.  */
+/* #undef HAVE_SIGSETJMP */
+
+/* Define if you have the strcasecmp function.  */
+#define HAVE_STRCASECMP 1
+
+/* Define if you have the strerror function.  */
+#define HAVE_STRERROR 1
+
+/* Define if you have the strstr function.  */
+#define HAVE_STRSTR 1
+
+/* Define if you have the sysconf function.  */
+/* #undef HAVE_SYSCONF */
+
+/* Define if you have the tcsetpgrp function.  */
+/* #undef HAVE_TCSETPGRP */
+
+/* Define if you have the ulimit function.  */
+/* #undef HAVE_ULIMIT */
+
+/* Define if you have the valloc function.  */
+/* #undef HAVE_VALLOC */
+
+/* Define if you have the wait3 function.  */
+/* #undef HAVE_WAIT3 */
+
+/* Define if you have the waitpid function.  */
+/* #undef HAVE_WAITPID */
+
+/* Define if you have the <dirent.h> header file.  */
+#define HAVE_DIRENT_H 1
+
+/* Define if you have the <fcntl.h> header file.  */
+#define HAVE_FCNTL_H 1
+
+/* Define if you have the <limits.h> header file.  */
+#define HAVE_LIMITS_H 1
+
+/* Define if you have the <memory.h> header file.  */
+#define HAVE_MEMORY_H 1
+
+/* Define if you have the <ndir.h> header file.  */
+/* #undef HAVE_NDIR_H */
+
+/* Define if you have the <paths.h> header file.  */
+/* #undef HAVE_PATHS_H */
+
+/* Define if you have the <stddef.h> header file.  */
+#define HAVE_STDDEF_H 1
+
+/* Define if you have the <stdlib.h> header file.  */
+#define HAVE_STDLIB_H 1
+
+/* Define if you have the <string.h> header file.  */
+#define HAVE_STRING_H 1
+
+/* Define if you have the <sys/dir.h> header file.  */
+/* #undef HAVE_SYS_DIR_H */
+
+/* Define if you have the <sys/ndir.h> header file.  */
+/* #undef HAVE_SYS_NDIR_H */
+
+/* Define if you have the <sys/param.h> header file.  */
+#define HAVE_SYS_PARAM_H 1
+
+/* Define if you have the <sys/resource.h> header file.  */
+/* #undef HAVE_SYS_RESOURCE_H */
+
+/* Define if you have the <sys/time.h> header file.  */
+#define HAVE_SYS_TIME_H 1
+
+/* Define if you have the <sys/wait.h> header file.  */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define if you have the <ulimit.h> header file.  */
+/* #undef HAVE_ULIMIT_H */
+
+/* Define if you have the <values.h> header file.  */
+#define HAVE_VALUES_H 1
+
+/* Need to use a separate file to keep the configure script from commenting
+ * out the undefs....
+ */
+#include "conf-end.h"
+
+#endif /* CONFIG_H */
diff -u -r -N pdksh-5.2.14/config.log pdksh-aros/config.log
--- pdksh-5.2.14/config.log	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/config.log	Tue Mar 30 20:23:22 2004
@@ -0,0 +1,816 @@
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+configure:791: checking for gcc
+configure:819: checking whether we are using GNU C
+configure:840: checking whether /usr/local/i386-aros/bin/gcc accepts -g
+configure:867: checking how to run the C preprocessor
+configure:888: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:929: checking whether /usr/local/i386-aros/bin/gcc needs -traditional
+/usr/local/i386-aros/bin/gcc -E
+configure:936:19: sgtty.h: No such file or directory
+/usr/local/i386-aros/bin/gcc -E
+configure:954:20: termio.h: No such file or directory
+configure:982: checking if this is a problematic os
+/usr/local/i386-aros/bin/gcc -E
+/usr/local/i386-aros/bin/gcc -E -C
+configure:1033: checking for minix/config.h
+configure:1043: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1039:26: minix/config.h: No such file or directory
+configure: failed program was:
+#line 1038 "configure"
+#include "confdefs.h"
+#include <minix/config.h>
+/usr/local/i386-aros/bin/gcc -E -C
+/usr/local/i386-aros/bin/gcc -E
+/usr/local/i386-aros/bin/gcc -E
+configure:1135: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+/usr/local/i386-aros/bin/gcc -E
+configure:1376: checking for dirent.h that defines DIR
+configure:1389: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:1414: checking for opendir in -ldir
+configure:1433: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c -ldir   1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c -ldir   1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c -ldir
+ld: cannot find -ldir
+configure: failed program was:
+#line 1422 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char opendir();
+
+int main() {
+opendir()
+; return 0; }
+configure:1452: checking for opendir in -lndir
+configure:1471: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c -lndir   1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c -lndir   1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c -lndir
+ld: cannot find -lndir
+configure: failed program was:
+#line 1460 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char opendir();
+
+int main() {
+opendir()
+; return 0; }
+configure:1537: checking for sane unistd.h
+configure:1555: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:1576: checking terminal interface
+configure:1596: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:1582:21: termios.h: No such file or directory
+configure: In function `main':
+configure:1585: error: storage size of `t' isn't known
+configure:1591: error: `TCSADRAIN' undeclared (first use in this function)
+configure:1591: error: (Each undeclared identifier is reported only once
+configure:1591: error: for each function it appears in.)
+configure: failed program was:
+#line 1581 "configure"
+#include "confdefs.h"
+#include <termios.h>
+int main() {
+
+        struct termios t;
+#if defined(ultrix) || defined(__ultrix__)
+         Termios in ultrix 4.2 botches type-ahead when going from cooked to
+         cbreak mode.  The BSD tty interface works fine though, so use it
+         (would be good to know if alter versions of ultrix work).
+#endif /* ultrix */
+         tcgetattr(0, &t); tcsetattr(0, TCSADRAIN, &t);
+      
+; return 0; }
+configure:1621: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:1605:23: sys/ioctl.h: No such file or directory
+configure: In function `main':
+configure:1608: error: storage size of `sb' isn't known
+configure:1608: error: `TIOCGETP' undeclared (first use in this function)
+configure:1608: error: (Each undeclared identifier is reported only once
+configure:1608: error: for each function it appears in.)
+configure:1612: error: storage size of `tc' isn't known
+configure:1612: error: `TIOCGETC' undeclared (first use in this function)
+configure: failed program was:
+#line 1604 "configure"
+#include "confdefs.h"
+#include <sys/ioctl.h>
+int main() {
+
+	    struct sgttyb sb; ioctl(0, TIOCGETP, &sb);
+#ifdef TIOCGATC
+	    { struct ttychars lc; ioctl(0, TIOCGATC, &lc); }
+#else /* TIOCGATC */
+	    { struct tchars tc; ioctl(0, TIOCGETC, &tc); }
+# ifdef TIOCGLTC
+	    { struct ltchars ltc; ioctl(0, TIOCGLTC, &ltc); }
+# endif /* TIOCGLTC */
+#endif /* TIOCGATC */
+	  
+; return 0; }
+configure:1630: checking for termio.h
+configure:1640: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1636:20: termio.h: No such file or directory
+configure: failed program was:
+#line 1635 "configure"
+#include "confdefs.h"
+#include <termio.h>
+configure:1686: checking for stddef.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for stdlib.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for string.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for memory.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for fcntl.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for limits.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for paths.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1692:19: paths.h: No such file or directory
+configure: failed program was:
+#line 1691 "configure"
+#include "confdefs.h"
+#include <paths.h>
+configure:1686: checking for sys/param.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for sys/resource.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1692:26: sys/resource.h: No such file or directory
+configure: failed program was:
+#line 1691 "configure"
+#include "confdefs.h"
+#include <sys/resource.h>
+configure:1686: checking for values.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1686: checking for ulimit.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1692:20: ulimit.h: No such file or directory
+configure: failed program was:
+#line 1691 "configure"
+#include "confdefs.h"
+#include <ulimit.h>
+configure:1686: checking for sys/time.h
+configure:1696: echo /usr/local/i386-aros/bin/gcc -E  1>&5; /usr/local/i386-aros/bin/gcc -E  conftest.c >/dev/null 2>conftest.out
+/usr/local/i386-aros/bin/gcc -E
+configure:1723: checking whether time.h and sys/time.h may both be included
+configure:1737: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:1758: checking for sys/wait.h that is POSIX.1 compatible
+configure:1779: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:1842: checking for off_t in sys/types.h
+/usr/local/i386-aros/bin/gcc -E
+configure:1877: checking for mode_t in sys/types.h
+/usr/local/i386-aros/bin/gcc -E
+configure:1912: checking for pid_t in sys/types.h
+/usr/local/i386-aros/bin/gcc -E
+configure:1947: checking for uid_t in sys/types.h
+/usr/local/i386-aros/bin/gcc -E
+configure:2057: checking return type of signal handlers
+configure:2079: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:2108: checking size of int
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2143: checking size of long
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2178: checking for clock_t in any of <sys/types.h>, <sys/times.h> and <sys/time.h>
+/usr/local/i386-aros/bin/gcc -E
+configure:2192:23: sys/times.h: No such file or directory
+configure:2218: checking for sigset_t in <sys/types.h> and <signal.h>
+/usr/local/i386-aros/bin/gcc -E
+configure:2253: checking for rlim_t in <sys/types.h> and <sys/resource.h>
+/usr/local/i386-aros/bin/gcc -E
+configure:2329: checking for working memmove
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2381: checking for working bcopy
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2434: checking for memset
+configure:2456: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2481: checking for confstr
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U confstr	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char confstr(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char confstr();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_confstr) || defined (__stub___confstr)
+choke me
+#else
+confstr();
+#endif
+
+; return 0; }
+configure:2481: checking for dup2
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2481: checking for flock
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U flock	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char flock(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char flock();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_flock) || defined (__stub___flock)
+choke me
+#else
+flock();
+#endif
+
+; return 0; }
+configure:2481: checking for getcwd
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2481: checking for getwd
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U getwd	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getwd(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getwd();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getwd) || defined (__stub___getwd)
+choke me
+#else
+getwd();
+#endif
+
+; return 0; }
+configure:2481: checking for killpg
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U killpg	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char killpg(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char killpg();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_killpg) || defined (__stub___killpg)
+choke me
+#else
+killpg();
+#endif
+
+; return 0; }
+configure:2481: checking for nice
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U nice	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char nice(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char nice();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_nice) || defined (__stub___nice)
+choke me
+#else
+nice();
+#endif
+
+; return 0; }
+configure:2481: checking for setrlimit
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U setrlimit	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char setrlimit(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char setrlimit();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_setrlimit) || defined (__stub___setrlimit)
+choke me
+#else
+setrlimit();
+#endif
+
+; return 0; }
+configure:2481: checking for strerror
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2481: checking for strcasecmp
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2481: checking for strstr
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2493: warning: conflicting types for built-in function `strstr'
+configure:2481: checking for sysconf
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U sysconf	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char sysconf(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char sysconf();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_sysconf) || defined (__stub___sysconf)
+choke me
+#else
+sysconf();
+#endif
+
+; return 0; }
+configure:2481: checking for tcsetpgrp
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U tcsetpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char tcsetpgrp(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tcsetpgrp();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_tcsetpgrp) || defined (__stub___tcsetpgrp)
+choke me
+#else
+tcsetpgrp();
+#endif
+
+; return 0; }
+configure:2481: checking for ulimit
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U ulimit	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char ulimit(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char ulimit();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_ulimit) || defined (__stub___ulimit)
+choke me
+#else
+ulimit();
+#endif
+
+; return 0; }
+configure:2481: checking for waitpid
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U waitpid	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char waitpid(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char waitpid();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_waitpid) || defined (__stub___waitpid)
+choke me
+#else
+waitpid();
+#endif
+
+; return 0; }
+configure:2481: checking for wait3
+configure:2509: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U wait3	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2503
+configure: failed program was:
+#line 2486 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char wait3(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char wait3();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_wait3) || defined (__stub___wait3)
+choke me
+#else
+wait3();
+#endif
+
+; return 0; }
+configure:2536: checking for sigsetjmp
+configure:2564: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U sigsetjmp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2558
+configure: failed program was:
+#line 2541 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char sigsetjmp(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char sigsetjmp();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_sigsetjmp) || defined (__stub___sigsetjmp)
+choke me
+#else
+sigsetjmp();
+#endif
+
+; return 0; }
+configure:2536: checking for _setjmp
+configure:2564: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U _setjmp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2558
+configure: failed program was:
+#line 2541 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char _setjmp(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char _setjmp();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub__setjmp) || defined (__stub____setjmp)
+choke me
+#else
+_setjmp();
+#endif
+
+; return 0; }
+configure:2591: checking for valloc
+configure:2619: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U valloc	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2613
+configure: failed program was:
+#line 2596 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char valloc(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char valloc();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_valloc) || defined (__stub___valloc)
+choke me
+#else
+valloc();
+#endif
+
+; return 0; }
+configure:2591: checking for getpagesize
+configure:2619: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U getpagesize	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2613
+configure: failed program was:
+#line 2596 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getpagesize(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getpagesize();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getpagesize) || defined (__stub___getpagesize)
+choke me
+#else
+getpagesize();
+#endif
+
+; return 0; }
+configure:2644: checking for working mmap
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2657:22: sys/mman.h: No such file or directory
+configure: In function `main':
+configure:2697: error: `PAGESIZE' undeclared (first use in this function)
+configure:2697: error: (Each undeclared identifier is reported only once
+configure:2697: error: for each function it appears in.)
+configure:2708: error: `PROT_READ' undeclared (first use in this function)
+configure:2708: error: `PROT_WRITE' undeclared (first use in this function)
+configure:2708: error: `MAP_FIXED' undeclared (first use in this function)
+configure:2708: error: `MAP_PRIVATE' undeclared (first use in this function)
+configure:2744: checking for lstat
+configure:2762: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2783: checking for sys_errlist declaration in errno.h
+configure:2795: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure: In function `main':
+configure:2791: error: `sys_errlist' undeclared (first use in this function)
+configure:2791: error: (Each undeclared identifier is reported only once
+configure:2791: error: for each function it appears in.)
+configure: failed program was:
+#line 2788 "configure"
+#include "confdefs.h"
+#include <errno.h>
+int main() {
+char *msg = *(sys_errlist + 1); if (msg && *msg) return 12; 
+; return 0; }
+configure:2819: checking for sys_errlist in library
+configure:2837: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U sys_errlist	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2832
+         U sys_nerr	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2832
+configure: failed program was:
+#line 2824 "configure"
+#include "confdefs.h"
+
+int main() {
+
+	    extern char *sys_errlist[];
+	    extern int sys_nerr;
+	    char *p;
+	    p = sys_errlist[sys_nerr - 1];
+	    if (p) return 12;
+	  
+; return 0; }
+configure:2859: checking for sys_siglist declaration in signal.h or unistd.h
+configure:2876: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure: In function `main':
+configure:2872: error: `sys_siglist' undeclared (first use in this function)
+configure:2872: error: (Each undeclared identifier is reported only once
+configure:2872: error: for each function it appears in.)
+configure: failed program was:
+#line 2864 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <signal.h>
+/* NetBSD declares sys_siglist in unistd.h.  */
+#ifdef HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+int main() {
+char *msg = *(sys_siglist + 1);
+; return 0; }
+configure:2903: checking for sys_siglist in library
+configure:2920: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U sys_siglist	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:2914
+configure: failed program was:
+#line 2908 "configure"
+#include "confdefs.h"
+
+int main() {
+
+	  extern char *sys_siglist[];
+	  char *p = sys_siglist[2];
+	  if (p)
+		  return 12;
+	  
+; return 0; }
+configure:2942: checking time() declaration in time.h
+configure:2955: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:2976: checking if times() is present/working
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:2988:23: sys/times.h: No such file or directory
+configure:2996:5: #error cannot find 32 bit type...
+configure: In function `main':
+configure:3002: error: storage size of `tms' isn't known
+configure:3031: checking for getrusage
+configure:3059: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U getrusage	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3053
+configure: failed program was:
+#line 3036 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getrusage(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getrusage();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getrusage) || defined (__stub___getrusage)
+choke me
+#else
+getrusage();
+#endif
+
+; return 0; }
+configure:3086: checking whether stat file-mode macros are broken
+/usr/local/i386-aros/bin/gcc -E
+configure:3148: checking for st_rdev in struct stat
+configure:3161: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3182: checking for working const
+configure:3236: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3257: checking if compiler understands void
+configure:3273: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3296: checking if compiler understands volatile
+configure:3310: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3333: checking if compiler understands prototypes
+configure:3352: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3373: checking if C compiler groks __attribute__(( .. ))
+configure:3395: echo /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5; /usr/local/i386-aros/bin/gcc -c -g -O  conftest.c 1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -c -g -O conftest.c
+configure:3387: warning: `blah' attribute directive ignored
+configure:3418: checking whether #! works in shell scripts
+configure:3473: checking for a BSD compatible install
+configure:3523: checking if dup2() works (ie, resets the close-on-exec flag)
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:3582: checking flavour of signal routines
+configure:3600: echo /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5; /usr/local/i386-aros/bin/gcc -o conftest -g -O   conftest.c  1>&5 2>&5
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:3808: checking flavour of pgrp routines
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U fork	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3825
+         U getpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3835
+         U setpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3833
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U fork	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3864
+         U getpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3868
+         U setpgid	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3873
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+There are undefined symbols in 'conftest':
+         U fork	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3905
+         U getpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3908
+         U setpgrp	/usr/home/jpatton/AROS/AROS/contrib/gnu/pdksh-5.2.14/configure:3908
+configure:4034: checking if opendir() fails to open non-directories
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
+configure:4102: checking if you have /dev/fd/n
+/usr/local/i386-aros/bin/gcc -o conftest -g -O conftest.c
diff -u -r -N pdksh-5.2.14/config.status pdksh-aros/config.status
--- pdksh-5.2.14/config.status	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/config.status	Tue Mar 30 20:23:21 2004
@@ -0,0 +1,405 @@
+#! /bin/sh
+# Generated automatically by configure.
+# Run this file to recreate the current configuration.
+# This directory was configured as follows,
+# on host arosdev.downbeach.net:
+#
+# ./configure 
+#
+# Compiler output produced by configure, useful for debugging
+# configure, is in ./config.log if it exists.
+
+ac_cs_usage="Usage: ./config.status [--recheck] [--version] [--help]"
+for ac_option
+do
+  case "$ac_option" in
+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+    echo "running ${CONFIG_SHELL-/bin/sh} ./configure  --no-create --no-recursion"
+    exec ${CONFIG_SHELL-/bin/sh} ./configure  --no-create --no-recursion ;;
+  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
+    echo "./config.status generated by autoconf version 2.12"
+    exit 0 ;;
+  -help | --help | --hel | --he | --h)
+    echo "$ac_cs_usage"; exit 0 ;;
+  *) echo "$ac_cs_usage"; exit 1 ;;
+  esac
+done
+
+ac_given_srcdir=.
+ac_given_INSTALL="/usr/bin/install -c"
+
+trap 'rm -fr Makefile config.h conftest*; exit 1' 1 2 15
+
+# Protect against being on the right side of a sed subst in config.status.
+sed 's/%@/@@/; s/@%/@@/; s/%g$/@g/; /@g$/s/[\\&%]/\\&/g;
+ s/@@/%@/; s/@@/@%/; s/@g$/%g/' > conftest.subs <<\CEOF
+/^[ 	]*VPATH[ 	]*=[^:]*$/d
+
+s%@CFLAGS@%-g -O%g
+s%@CPPFLAGS@%%g
+s%@CXXFLAGS@%%g
+s%@DEFS@%-DHAVE_CONFIG_H%g
+s%@LDFLAGS@%%g
+s%@LIBS@%%g
+s%@exec_prefix@%${prefix}%g
+s%@prefix@%/usr/local%g
+s%@program_transform_name@%s,x,x,%g
+s%@bindir@%${exec_prefix}/bin%g
+s%@sbindir@%${exec_prefix}/sbin%g
+s%@libexecdir@%${exec_prefix}/libexec%g
+s%@datadir@%${prefix}/share%g
+s%@sysconfdir@%${prefix}/etc%g
+s%@sharedstatedir@%${prefix}/com%g
+s%@localstatedir@%${prefix}/var%g
+s%@libdir@%${exec_prefix}/lib%g
+s%@includedir@%${prefix}/include%g
+s%@oldincludedir@%/usr/include%g
+s%@infodir@%${prefix}/info%g
+s%@mandir@%${prefix}/man%g
+s%@SHELL_PROG@%ksh%g
+s%@CC@%/usr/local/i386-aros/bin/gcc%g
+s%@CPP@%/usr/local/i386-aros/bin/gcc -E%g
+s%@LDSTATIC@%%g
+s%@ac_exe_suffix@%%g
+s%@INSTALL_PROGRAM@%${INSTALL}%g
+s%@INSTALL_DATA@%${INSTALL} -m 644%g
+
+CEOF
+
+# Split the substitutions into bite-sized pieces for seds with
+# small command number limits, like on Digital OSF/1 and HP-UX.
+ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
+ac_file=1 # Number of current file.
+ac_beg=1 # First line for current file.
+ac_end=$ac_max_sed_cmds # Line after last line for current file.
+ac_more_lines=:
+ac_sed_cmds=""
+while $ac_more_lines; do
+  if test $ac_beg -gt 1; then
+    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
+  else
+    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
+  fi
+  if test ! -s conftest.s$ac_file; then
+    ac_more_lines=false
+    rm -f conftest.s$ac_file
+  else
+    if test -z "$ac_sed_cmds"; then
+      ac_sed_cmds="sed -f conftest.s$ac_file"
+    else
+      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
+    fi
+    ac_file=`expr $ac_file + 1`
+    ac_beg=$ac_end
+    ac_end=`expr $ac_end + $ac_max_sed_cmds`
+  fi
+done
+if test -z "$ac_sed_cmds"; then
+  ac_sed_cmds=cat
+fi
+
+CONFIG_FILES=${CONFIG_FILES-"Makefile"}
+for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case "$ac_file" in
+  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
+       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
+  *) ac_file_in="${ac_file}.in" ;;
+  esac
+
+  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.
+
+  # Remove last slash and all that follows it.  Not all systems have dirname.
+  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
+  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
+    # The file is in a subdirectory.
+    test ! -d "$ac_dir" && mkdir "$ac_dir"
+    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
+    # A "../" for each directory in $ac_dir_suffix.
+    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
+  else
+    ac_dir_suffix= ac_dots=
+  fi
+
+  case "$ac_given_srcdir" in
+  .)  srcdir=.
+      if test -z "$ac_dots"; then top_srcdir=.
+      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
+  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
+  *) # Relative path.
+    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
+    top_srcdir="$ac_dots$ac_given_srcdir" ;;
+  esac
+
+  case "$ac_given_INSTALL" in
+  [/$]*) INSTALL="$ac_given_INSTALL" ;;
+  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
+  esac
+
+  echo creating "$ac_file"
+  rm -f "$ac_file"
+  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
+  case "$ac_file" in
+  *Makefile*) ac_comsub="1i\\
+# $configure_input" ;;
+  *) ac_comsub= ;;
+  esac
+
+  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
+  sed -e "$ac_comsub
+s%@configure_input@%$configure_input%g
+s%@srcdir@%$srcdir%g
+s%@top_srcdir@%$top_srcdir%g
+s%@INSTALL@%$INSTALL%g
+" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
+fi; done
+rm -f conftest.s*
+
+# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
+# NAME is the cpp macro being defined and VALUE is the value it is being given.
+#
+# ac_d sets the value in "#define NAME VALUE" lines.
+ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
+ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
+ac_dC='\3'
+ac_dD='%g'
+# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
+ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ac_uB='\([ 	]\)%\1#\2define\3'
+ac_uC=' '
+ac_uD='\4%g'
+# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ac_eB='$%\1#\2define\3'
+ac_eC=' '
+ac_eD='%g'
+
+if test "${CONFIG_HEADERS+set}" != set; then
+  CONFIG_HEADERS="config.h"
+fi
+for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case "$ac_file" in
+  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
+       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
+  *) ac_file_in="${ac_file}.in" ;;
+  esac
+
+  echo creating $ac_file
+
+  rm -f conftest.frag conftest.in conftest.out
+  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
+  cat $ac_file_inputs > conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}DEFAULT_PATH${ac_dB}DEFAULT_PATH${ac_dC}"/bin:/usr/bin:/usr/ucb"${ac_dD}
+${ac_uA}DEFAULT_PATH${ac_uB}DEFAULT_PATH${ac_uC}"/bin:/usr/bin:/usr/ucb"${ac_uD}
+${ac_eA}DEFAULT_PATH${ac_eB}DEFAULT_PATH${ac_eC}"/bin:/usr/bin:/usr/ucb"${ac_eD}
+${ac_dA}KSH${ac_dB}KSH${ac_dC}1${ac_dD}
+${ac_uA}KSH${ac_uB}KSH${ac_uC}1${ac_uD}
+${ac_eA}KSH${ac_eB}KSH${ac_eC}1${ac_eD}
+${ac_dA}EMACS${ac_dB}EMACS${ac_dC}1${ac_dD}
+${ac_uA}EMACS${ac_uB}EMACS${ac_uC}1${ac_uD}
+${ac_eA}EMACS${ac_eB}EMACS${ac_eC}1${ac_eD}
+${ac_dA}VI${ac_dB}VI${ac_dC}1${ac_dD}
+${ac_uA}VI${ac_uB}VI${ac_uC}1${ac_uD}
+${ac_eA}VI${ac_eB}VI${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}JOBS${ac_dB}JOBS${ac_dC}1${ac_dD}
+${ac_uA}JOBS${ac_uB}JOBS${ac_uC}1${ac_uD}
+${ac_eA}JOBS${ac_eB}JOBS${ac_eC}1${ac_eD}
+${ac_dA}BRACE_EXPAND${ac_dB}BRACE_EXPAND${ac_dC}1${ac_dD}
+${ac_uA}BRACE_EXPAND${ac_uB}BRACE_EXPAND${ac_uC}1${ac_uD}
+${ac_eA}BRACE_EXPAND${ac_eB}BRACE_EXPAND${ac_eC}1${ac_eD}
+${ac_dA}HISTORY${ac_dB}HISTORY${ac_dC}1${ac_dD}
+${ac_uA}HISTORY${ac_uB}HISTORY${ac_uC}1${ac_uD}
+${ac_eA}HISTORY${ac_eB}HISTORY${ac_eC}1${ac_eD}
+${ac_dA}HAVE_DIRENT_H${ac_dB}HAVE_DIRENT_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_DIRENT_H${ac_uB}HAVE_DIRENT_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_DIRENT_H${ac_eB}HAVE_DIRENT_H${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_UNISTD_H${ac_dB}HAVE_UNISTD_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_UNISTD_H${ac_uB}HAVE_UNISTD_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_UNISTD_H${ac_eB}HAVE_UNISTD_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_STDDEF_H${ac_dB}HAVE_STDDEF_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STDDEF_H${ac_uB}HAVE_STDDEF_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STDDEF_H${ac_eB}HAVE_STDDEF_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_STDLIB_H${ac_dB}HAVE_STDLIB_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STDLIB_H${ac_uB}HAVE_STDLIB_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STDLIB_H${ac_eB}HAVE_STDLIB_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_STRING_H${ac_dB}HAVE_STRING_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STRING_H${ac_uB}HAVE_STRING_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STRING_H${ac_eB}HAVE_STRING_H${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_MEMORY_H${ac_dB}HAVE_MEMORY_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_MEMORY_H${ac_uB}HAVE_MEMORY_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_MEMORY_H${ac_eB}HAVE_MEMORY_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_FCNTL_H${ac_dB}HAVE_FCNTL_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_FCNTL_H${ac_uB}HAVE_FCNTL_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_FCNTL_H${ac_eB}HAVE_FCNTL_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_LIMITS_H${ac_dB}HAVE_LIMITS_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_LIMITS_H${ac_uB}HAVE_LIMITS_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_LIMITS_H${ac_eB}HAVE_LIMITS_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_SYS_PARAM_H${ac_dB}HAVE_SYS_PARAM_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_SYS_PARAM_H${ac_uB}HAVE_SYS_PARAM_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_SYS_PARAM_H${ac_eB}HAVE_SYS_PARAM_H${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_VALUES_H${ac_dB}HAVE_VALUES_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_VALUES_H${ac_uB}HAVE_VALUES_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_VALUES_H${ac_eB}HAVE_VALUES_H${ac_eC}1${ac_eD}
+${ac_dA}HAVE_SYS_TIME_H${ac_dB}HAVE_SYS_TIME_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_SYS_TIME_H${ac_uB}HAVE_SYS_TIME_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_SYS_TIME_H${ac_eB}HAVE_SYS_TIME_H${ac_eC}1${ac_eD}
+${ac_dA}TIME_WITH_SYS_TIME${ac_dB}TIME_WITH_SYS_TIME${ac_dC}1${ac_dD}
+${ac_uA}TIME_WITH_SYS_TIME${ac_uB}TIME_WITH_SYS_TIME${ac_uC}1${ac_uD}
+${ac_eA}TIME_WITH_SYS_TIME${ac_eB}TIME_WITH_SYS_TIME${ac_eC}1${ac_eD}
+${ac_dA}POSIX_SYS_WAIT${ac_dB}POSIX_SYS_WAIT${ac_dC}1${ac_dD}
+${ac_uA}POSIX_SYS_WAIT${ac_uB}POSIX_SYS_WAIT${ac_uC}1${ac_uD}
+${ac_eA}POSIX_SYS_WAIT${ac_eB}POSIX_SYS_WAIT${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_SYS_WAIT_H${ac_dB}HAVE_SYS_WAIT_H${ac_dC}1${ac_dD}
+${ac_uA}HAVE_SYS_WAIT_H${ac_uB}HAVE_SYS_WAIT_H${ac_uC}1${ac_uD}
+${ac_eA}HAVE_SYS_WAIT_H${ac_eB}HAVE_SYS_WAIT_H${ac_eC}1${ac_eD}
+${ac_dA}RETSIGTYPE${ac_dB}RETSIGTYPE${ac_dC}void${ac_dD}
+${ac_uA}RETSIGTYPE${ac_uB}RETSIGTYPE${ac_uC}void${ac_uD}
+${ac_eA}RETSIGTYPE${ac_eB}RETSIGTYPE${ac_eC}void${ac_eD}
+${ac_dA}RETSIGVAL${ac_dB}RETSIGVAL${ac_dC}${ac_dD}
+${ac_uA}RETSIGVAL${ac_uB}RETSIGVAL${ac_uC}${ac_uD}
+${ac_eA}RETSIGVAL${ac_eB}RETSIGVAL${ac_eC}${ac_eD}
+${ac_dA}SIZEOF_INT${ac_dB}SIZEOF_INT${ac_dC}0${ac_dD}
+${ac_uA}SIZEOF_INT${ac_uB}SIZEOF_INT${ac_uC}0${ac_uD}
+${ac_eA}SIZEOF_INT${ac_eB}SIZEOF_INT${ac_eC}0${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}SIZEOF_LONG${ac_dB}SIZEOF_LONG${ac_dC}0${ac_dD}
+${ac_uA}SIZEOF_LONG${ac_uB}SIZEOF_LONG${ac_uC}0${ac_uD}
+${ac_eA}SIZEOF_LONG${ac_eB}SIZEOF_LONG${ac_eC}0${ac_eD}
+${ac_dA}HAVE_MEMSET${ac_dB}HAVE_MEMSET${ac_dC}1${ac_dD}
+${ac_uA}HAVE_MEMSET${ac_uB}HAVE_MEMSET${ac_uC}1${ac_uD}
+${ac_eA}HAVE_MEMSET${ac_eB}HAVE_MEMSET${ac_eC}1${ac_eD}
+${ac_dA}HAVE_DUP2${ac_dB}HAVE_DUP2${ac_dC}1${ac_dD}
+${ac_uA}HAVE_DUP2${ac_uB}HAVE_DUP2${ac_uC}1${ac_uD}
+${ac_eA}HAVE_DUP2${ac_eB}HAVE_DUP2${ac_eC}1${ac_eD}
+${ac_dA}HAVE_GETCWD${ac_dB}HAVE_GETCWD${ac_dC}1${ac_dD}
+${ac_uA}HAVE_GETCWD${ac_uB}HAVE_GETCWD${ac_uC}1${ac_uD}
+${ac_eA}HAVE_GETCWD${ac_eB}HAVE_GETCWD${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_STRERROR${ac_dB}HAVE_STRERROR${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STRERROR${ac_uB}HAVE_STRERROR${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STRERROR${ac_eB}HAVE_STRERROR${ac_eC}1${ac_eD}
+${ac_dA}HAVE_STRCASECMP${ac_dB}HAVE_STRCASECMP${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STRCASECMP${ac_uB}HAVE_STRCASECMP${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STRCASECMP${ac_eB}HAVE_STRCASECMP${ac_eC}1${ac_eD}
+${ac_dA}HAVE_STRSTR${ac_dB}HAVE_STRSTR${ac_dC}1${ac_dD}
+${ac_uA}HAVE_STRSTR${ac_uB}HAVE_STRSTR${ac_uC}1${ac_uD}
+${ac_eA}HAVE_STRSTR${ac_eB}HAVE_STRSTR${ac_eC}1${ac_eD}
+${ac_dA}HAVE_LSTAT${ac_dB}HAVE_LSTAT${ac_dC}1${ac_dD}
+${ac_uA}HAVE_LSTAT${ac_uB}HAVE_LSTAT${ac_uC}1${ac_uD}
+${ac_eA}HAVE_LSTAT${ac_eB}HAVE_LSTAT${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}TIME_DECLARED${ac_dB}TIME_DECLARED${ac_dC}1${ac_dD}
+${ac_uA}TIME_DECLARED${ac_uB}TIME_DECLARED${ac_uC}1${ac_uD}
+${ac_eA}TIME_DECLARED${ac_eB}TIME_DECLARED${ac_eC}1${ac_eD}
+${ac_dA}TIMES_BROKEN${ac_dB}TIMES_BROKEN${ac_dC}1${ac_dD}
+${ac_uA}TIMES_BROKEN${ac_uB}TIMES_BROKEN${ac_uC}1${ac_uD}
+${ac_eA}TIMES_BROKEN${ac_eB}TIMES_BROKEN${ac_eC}1${ac_eD}
+${ac_dA}HAVE_ST_RDEV${ac_dB}HAVE_ST_RDEV${ac_dC}1${ac_dD}
+${ac_uA}HAVE_ST_RDEV${ac_uB}HAVE_ST_RDEV${ac_uC}1${ac_uD}
+${ac_eA}HAVE_ST_RDEV${ac_eB}HAVE_ST_RDEV${ac_eC}1${ac_eD}
+${ac_dA}HAVE_PROTOTYPES${ac_dB}HAVE_PROTOTYPES${ac_dC}1${ac_dD}
+${ac_uA}HAVE_PROTOTYPES${ac_uB}HAVE_PROTOTYPES${ac_uC}1${ac_uD}
+${ac_eA}HAVE_PROTOTYPES${ac_eB}HAVE_PROTOTYPES${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}HAVE_GCC_FUNC_ATTR${ac_dB}HAVE_GCC_FUNC_ATTR${ac_dC}1${ac_dD}
+${ac_uA}HAVE_GCC_FUNC_ATTR${ac_uB}HAVE_GCC_FUNC_ATTR${ac_uC}1${ac_uD}
+${ac_eA}HAVE_GCC_FUNC_ATTR${ac_eB}HAVE_GCC_FUNC_ATTR${ac_eC}1${ac_eD}
+${ac_dA}DUP2_BROKEN${ac_dB}DUP2_BROKEN${ac_dC}1${ac_dD}
+${ac_uA}DUP2_BROKEN${ac_uB}DUP2_BROKEN${ac_uC}1${ac_uD}
+${ac_eA}DUP2_BROKEN${ac_eB}DUP2_BROKEN${ac_eC}1${ac_eD}
+${ac_dA}POSIX_SIGNALS${ac_dB}POSIX_SIGNALS${ac_dC}1${ac_dD}
+${ac_uA}POSIX_SIGNALS${ac_uB}POSIX_SIGNALS${ac_uC}1${ac_uD}
+${ac_eA}POSIX_SIGNALS${ac_eB}POSIX_SIGNALS${ac_eC}1${ac_eD}
+${ac_dA}NO_PGRP${ac_dB}NO_PGRP${ac_dC}1${ac_dD}
+${ac_uA}NO_PGRP${ac_uB}NO_PGRP${ac_uC}1${ac_uD}
+${ac_eA}NO_PGRP${ac_eB}NO_PGRP${ac_eC}1${ac_eD}
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  cat > conftest.frag <<CEOF
+${ac_dA}OPENDIR_DOES_NONDIR${ac_dB}OPENDIR_DOES_NONDIR${ac_dC}1${ac_dD}
+${ac_uA}OPENDIR_DOES_NONDIR${ac_uB}OPENDIR_DOES_NONDIR${ac_uC}1${ac_uD}
+${ac_eA}OPENDIR_DOES_NONDIR${ac_eB}OPENDIR_DOES_NONDIR${ac_eC}1${ac_eD}
+s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
+CEOF
+  sed -f conftest.frag conftest.in > conftest.out
+  rm -f conftest.in
+  mv conftest.out conftest.in
+
+  rm -f conftest.frag conftest.h
+  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
+  cat conftest.in >> conftest.h
+  rm -f conftest.in
+  if cmp -s $ac_file conftest.h 2>/dev/null; then
+    echo "$ac_file is unchanged"
+    rm -f conftest.h
+  else
+    # Remove last slash and all that follows it.  Not all systems have dirname.
+      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
+      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
+      # The file is in a subdirectory.
+      test ! -d "$ac_dir" && mkdir "$ac_dir"
+    fi
+    rm -f $ac_file
+    mv conftest.h $ac_file
+  fi
+fi; done
+
+
+
+exit 0
diff -u -r -N pdksh-5.2.14/env.h pdksh-aros/env.h
--- pdksh-5.2.14/env.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/env.h	Tue Mar 30 21:35:33 2004
@@ -0,0 +1,22 @@
+/* struct env_var
+#{
+#    char                *ev_name;
+#    int                 ev_flags;
+#    void                *ev_value;
+#    ev_sethook_t        *ev_sethook;
+#    ev_unsethook_t      *ev_unsethook;
+#    struct env_var      *ev_next, *ev_prev;
+#};
+*/
+/* extern struct env_var   **environ; */
+/*
+#extern struct env_var   *env_getenv(const char *name);
+#extern int              env_setenv(const char *name, int flags,
+#                                   const void *value, ev_sethook_t sethook,
+#                                   ev_unsethook_t unsethook);
+#extern char             *getenv(const char *name); 
+#extern int              setenv(const char *name, const char *value,
+#                               int overwrite);
+#extern int              putenv(const char *string);  
+#extern int              unsetenv(const char *name);
+*/
diff -u -r -N pdksh-5.2.14/eval.c pdksh-aros/eval.c
--- pdksh-5.2.14/eval.c	Tue Jul 13 12:48:39 1999
+++ pdksh-aros/eval.c	Tue Mar 30 22:22:28 2004
@@ -1283,7 +1283,9 @@
 #else /* OS2 */
 		struct passwd *pw;
 
-		pw = getpwnam(name);
+/*		pw = getpwnam(name); */
+/* AROS */
+		pw = "AROS";
 		if (pw == NULL)
 			return NULL;
 		ap->val.s = str_save(pw->pw_dir, APERM);
diff -u -r -N pdksh-5.2.14/ioctl.h pdksh-aros/ioctl.h
--- pdksh-5.2.14/ioctl.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/ioctl.h	Tue Mar 30 20:57:10 2004
@@ -0,0 +1,89 @@
+/*	$OpenBSD: ioctl.h,v 1.3 1996/03/03 12:11:50 niklas Exp $	*/
+/*	$NetBSD: ioctl.h,v 1.20 1996/01/30 18:21:47 thorpej Exp $	*/
+
+/*-
+ * Copyright (c) 1982, 1986, 1990, 1993, 1994
+ *	The Regents of the University of California.  All rights reserved.
+ * (c) UNIX System Laboratories, Inc.
+ * All or some portions of this file are derived from material licensed
+ * to the University of California by American Telephone and Telegraph
+ * Co. or Unix System Laboratories, Inc. and are reproduced herein with
+ * the permission of UNIX System Laboratories, Inc.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *	This product includes software developed by the University of
+ *	California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ *	@(#)ioctl.h	8.6 (Berkeley) 3/28/94
+ */
+
+#ifndef	_SYS_IOCTL_H_
+#define	_SYS_IOCTL_H_
+
+/* #include <sys/ttycom.h> */
+
+/*
+ * Pun for SunOS prior to 3.2.  SunOS 3.2 and later support TIOCGWINSZ
+ * and TIOCSWINSZ (yes, even 3.2-3.5, the fact that it wasn't documented
+ * nonwithstanding).
+ */
+struct ttysize {
+	unsigned short	ts_lines;
+	unsigned short	ts_cols;
+	unsigned short	ts_xxx;
+	unsigned short	ts_yyy;
+};
+#define	TIOCGSIZE	TIOCGWINSZ
+#define	TIOCSSIZE	TIOCSWINSZ
+/*
+#include <sys/ioccom.h>
+
+#include <sys/dkio.h>
+#include <sys/filio.h>
+#include <sys/sockio.h>
+*/
+#ifndef _KERNEL
+
+#include <sys/cdefs.h>
+
+__BEGIN_DECLS
+int	ioctl __P((int, unsigned long, ...));
+__END_DECLS
+#endif /* !_KERNEL */
+#endif /* !_SYS_IOCTL_H_ */
+
+/*
+ * Keep outside _SYS_IOCTL_H_
+ * Compatability with old terminal driver
+ *
+ * Source level -> #define USE_OLD_TTY
+ * Kernel level -> options COMPAT_43 or COMPAT_SUNOS or ...
+ */
+#if defined(USE_OLD_TTY) || defined(COMPAT_43) || defined(COMPAT_SUNOS) || \
+    defined(COMPAT_SVR4) || defined(COMPAT_FREEBSD)
+#include <sys/ioctl_compat.h>
+#endif
diff -u -r -N pdksh-5.2.14/jobs.c pdksh-aros/jobs.c
--- pdksh-5.2.14/jobs.c	Tue Jul 13 12:50:56 1999
+++ pdksh-aros/jobs.c	Tue Mar 30 22:52:20 2004
@@ -500,13 +500,15 @@
 	fill_command(p->command, sizeof(p->command), t);
 
 	/* create child process */
-	forksleep = 1;
+/* No Fork In AROS */
+i = 1;
+/*	forksleep = 1;
 	while ((i = fork()) < 0 && errno == EAGAIN && forksleep < 32) {
-		if (intrsig)	 /* allow user to ^C out... */
+		if (intrsig)
 			break;
 		sleep(forksleep);
 		forksleep <<= 1;
-	}
+	} */
 	if (i < 0) {
 		kill_job(j);
 		remove_job(j, "fork failed");
@@ -1328,7 +1330,9 @@
 #ifdef JOB_SIGS
 		pid = ksh_waitpid(-1, &status, (WNOHANG|WUNTRACED));
 #else /* JOB_SIGS */
-		pid = wait(&status);
+/* AROS */
+/*		pid = wait(&status); */
+		pid = 0;
 #endif /* JOB_SIGS */
 
 		if (pid <= 0)	/* return if would block (0) ... */
diff -u -r -N pdksh-5.2.14/ksh_times.h pdksh-aros/ksh_times.h
--- pdksh-5.2.14/ksh_times.h	Mon Sep  9 14:50:52 1996
+++ pdksh-aros/ksh_times.h	Tue Mar 30 20:32:39 2004
@@ -4,7 +4,7 @@
 /* Needed for clock_t on some systems (ie, NeXT in non-posix mode) */
 #include "ksh_time.h"
 
-#include <sys/times.h>
+#include "times.h"
 
 #ifdef TIMES_BROKEN
 extern clock_t	ksh_times ARGS((struct tms *));
diff -u -r -N pdksh-5.2.14/lex.c pdksh-aros/lex.c
--- pdksh-5.2.14/lex.c	Wed May 12 09:44:53 1999
+++ pdksh-aros/lex.c	Tue Mar 30 21:15:13 2004
@@ -1003,10 +1003,11 @@
 	s->start = s->str = xp;
 
 #ifdef KSH
+/* AROS 
 	if (have_tty && ksh_tmout) {
 		ksh_tmout_state = TMOUT_READING;
 		alarm(ksh_tmout);
-	}
+	} */
 #endif /* KSH */
 #ifdef EDIT
 	if (have_tty && (0
@@ -1066,11 +1067,12 @@
 	 */
 	source = s;
 #ifdef KSH
+/* AROS
 	if (have_tty && ksh_tmout)
 	{
 		ksh_tmout_state = TMOUT_EXECUTING;
 		alarm(0);
-	}
+	} */
 #endif /* KSH */
 	s->start = s->str = Xstring(s->xs, xp);
 	strip_nuls(Xstring(s->xs, xp), Xlength(s->xs, xp));
diff -u -r -N pdksh-5.2.14/main.c pdksh-aros/main.c
--- pdksh-5.2.14/main.c	Tue May 11 09:59:52 1999
+++ pdksh-aros/main.c	Tue Mar 30 22:21:45 2004
@@ -3,13 +3,17 @@
  */
 
 #define	EXTERN				/* define EXTERNs in sh.h */
-
+/* AROS */
+#include "env.h"
+/* End AROS */
 #include "sh.h"
 #include "ksh_stat.h"
 #include "ksh_time.h"
 
-extern char **environ;
-
+/* extern char **environ; */
+/* AROS */
+char *environ;
+/* End AROS */
 /*
  * global data
  */
@@ -235,7 +239,9 @@
 			/* setstr can't fail here */
 			setstr(pwd_v, current_wd, KSH_RETURN_ERROR);
 	}
-	ppid = getppid();
+/*	ppid = getppid(); */
+/* AROS */
+	ppid = 0; 
 	setint(global("PPID"), (long) ppid);
 #ifdef KSH
 	setint(global("RANDOM"), (long) (time((time_t *)0) * kshpid * ppid));
@@ -266,7 +272,9 @@
 	}
 
 	/* Set this before parsing arguments */
-	Flag(FPRIVILEGED) = getuid() != ksheuid || getgid() != getegid();
+/*	Flag(FPRIVILEGED) = getuid() != ksheuid || getgid() != getegid(); */
+/* AROS */
+	Flag(FPRIVILEGED) = 0;
 
 	/* this to note if monitor is set on command line (see below) */
 	Flag(FMONITOR) = 127;
diff -u -r -N pdksh-5.2.14/misc.c pdksh-aros/misc.c
--- pdksh-5.2.14/misc.c	Fri Apr 16 10:50:31 1999
+++ pdksh-aros/misc.c	Tue Mar 30 22:16:14 2004
@@ -309,8 +309,9 @@
 #ifdef OS2
 		;
 #else /* OS2 */
-		setuid(ksheuid = getuid());
-		setgid(getgid());
+/* AROS */
+/*		setuid(ksheuid = getuid());
+		setgid(getgid()); */
 #endif /* OS2 */
 	} else if (f == FPOSIX && newval) {
 #ifdef BRACE_EXPAND
diff -u -r -N pdksh-5.2.14/missing.c pdksh-aros/missing.c
--- pdksh-5.2.14/missing.c	Mon May 24 15:32:27 1999
+++ pdksh-aros/missing.c	Tue Mar 30 22:13:00 2004
@@ -6,6 +6,8 @@
 #include "ksh_stat.h"
 #include "ksh_dir.h"
 
+/* AROS */
+/* #include "timeb.h" */
 
 #ifndef HAVE_MEMSET
 void *
@@ -232,7 +234,8 @@
 	/* Assume times() available, but always returns 0
 	 * (also assumes ftime() available)
 	 */
-	{
+/* AROS */
+/*	{
 		struct timeb tb;
 
 		if (times(tms) == (clock_t) -1)
@@ -242,7 +245,7 @@
 			base_sec = tb.time;
 		rv = (tb.time - base_sec) * CLK_TCK;
 		rv += tb.millitm * CLK_TCK / 1000;
-	}
+	} */
 # endif /* HAVE_GETRUSAGE */
 	return rv;
 }
diff -u -r -N pdksh-5.2.14/proto.h pdksh-aros/proto.h
--- pdksh-5.2.14/proto.h	Tue Jul 13 12:54:51 1999
+++ pdksh-aros/proto.h	Sat Jun 26 13:29:29 2004
@@ -186,7 +186,9 @@
 int	parse_args	ARGS((char **argv, int what, int *setargsp));
 int 	getn		ARGS((const char *as, int *ai));
 int 	bi_getn		ARGS((const char *as, int *ai));
+#ifndef __AROS__ /* we define this thanks anyway */
 char *	strerror	ARGS((int i));
+#endif /* __AROS__ */
 int 	gmatch		ARGS((const char *s, const char *p, int isfile));
 int	has_globbing	ARGS((const char *xp, const char *xpe));
 const unsigned char *pat_scan ARGS((const unsigned char *p,
diff -u -r -N pdksh-5.2.14/sh.h pdksh-aros/sh.h
--- pdksh-5.2.14/sh.h	Thu May 13 13:07:58 1999
+++ pdksh-aros/sh.h	Tue Mar 30 21:55:49 2004
@@ -12,6 +12,9 @@
 # define	ARGS(args)	()	/* K&R declaration */
 #endif
 
+/* AROS */
+#include <process.h>
+extern int spawnvp ARGS((int mode, const char *path, char *const argv[]));
 
 /* Start of common headers */
 
@@ -215,7 +218,9 @@
 					__setostype(1); \
 				} while (0)
 # else /* OS_ISC && _POSIX */
-#  define ksh_execve(p, av, ev, flags)	execve(p, av, ev)
+/* #  define ksh_execve(p, av, ev, flags)	execve(p, av, ev) */
+/* AROS */
+#define ksh_execve(p, av, ev, flags) spawnvp(P_WAIT, p, av)
 # endif /* OS_ISC && _POSIX */
 #endif /* OS2 */
 
@@ -251,7 +256,9 @@
 # if SIZEOF_LONG >= 4
 #  define INT32	long
 # else /* SIZEOF_LONG */
-   #error cannot find 32 bit type...
+/*   #error cannot find 32 bit type... */
+#warning "CHECKME: AROS INT32 is long?"
+#  define INT32	long
 # endif /* SIZEOF_LONG */
 #endif /* SIZEOF_INT */
 
diff -u -r -N pdksh-5.2.14/stamp-h pdksh-aros/stamp-h
--- pdksh-5.2.14/stamp-h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/stamp-h	Tue Mar 30 20:23:24 2004
@@ -0,0 +1 @@
+Tue Mar 30 20:23:24 EST 2004
diff -u -r -N pdksh-5.2.14/stand.h pdksh-aros/stand.h
--- pdksh-5.2.14/stand.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/stand.h	Tue Mar 30 21:22:33 2004
@@ -0,0 +1,410 @@
+/*
+ * Copyright (c) 1998 Michael Smith.
+ * All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ * $FreeBSD: src/lib/libstand/stand.h,v 1.38 2003/10/26 04:04:12 peter Exp $
+ * From	$NetBSD: stand.h,v 1.22 1997/06/26 19:17:40 drochner Exp $	
+ */
+
+/*-
+ * Copyright (c) 1993
+ *	The Regents of the University of California.  All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *	This product includes software developed by the University of
+ *	California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ *	@(#)stand.h	8.1 (Berkeley) 6/11/93
+ */
+
+#include <sys/types.h>
+#include <sys/cdefs.h>
+#include <sys/stat.h>
+#include <sys/dirent.h>
+#include <string.h>
+
+#define CHK(fmt, args...)	printf("%s(%d): " fmt "\n", __FUNCTION__, __LINE__ , ##args)
+#define PCHK(fmt, args...)	{printf("%s(%d): " fmt "\n", __FUNCTION__, __LINE__ , ##args); getchar();}
+
+#ifndef NULL
+#define	NULL	0
+#endif
+
+/* Avoid unwanted userlandish components */
+#define _KERNEL
+#include <sys/errno.h>
+#undef _KERNEL
+
+/* special stand error codes */
+#define	EADAPT	(ELAST+1)	/* bad adaptor */
+#define	ECTLR	(ELAST+2)	/* bad controller */
+#define	EUNIT	(ELAST+3)	/* bad unit */
+#define ESLICE	(ELAST+4)	/* bad slice */
+#define	EPART	(ELAST+5)	/* bad partition */
+#define	ERDLAB	(ELAST+6)	/* can't read disk label */
+#define	EUNLAB	(ELAST+7)	/* unlabeled disk */
+#define	EOFFSET	(ELAST+8)	/* relative seek not supported */
+#define	ESALAST	(ELAST+8)	/* */
+
+struct open_file;
+
+/*
+ * This structure is used to define file system operations in a file system
+ * independent way.
+ *
+ * XXX note that filesystem providers should export a pointer to their fs_ops
+ *     struct, so that consumers can reference this and thus include the
+ *     filesystems that they require.
+ */
+struct fs_ops {
+    const char	*fs_name;
+    int		(*fo_open)(const char *path, struct open_file *f);
+    int		(*fo_close)(struct open_file *f);
+    int		(*fo_read)(struct open_file *f, void *buf,
+			   size_t size, size_t *resid);
+    int		(*fo_write)(struct open_file *f, void *buf,
+			    size_t size, size_t *resid);
+    off_t	(*fo_seek)(struct open_file *f, off_t offset, int where);
+    int		(*fo_stat)(struct open_file *f, struct stat *sb);
+    int		(*fo_readdir)(struct open_file *f, struct dirent *d);
+};
+
+/*
+ * libstand-supplied filesystems
+ */
+extern struct fs_ops ufs_fsops;
+extern struct fs_ops tftp_fsops;
+extern struct fs_ops nfs_fsops;
+extern struct fs_ops cd9660_fsops;
+extern struct fs_ops gzipfs_fsops;
+extern struct fs_ops bzipfs_fsops;
+extern struct fs_ops dosfs_fsops;
+extern struct fs_ops ext2fs_fsops;
+extern struct fs_ops splitfs_fsops;
+
+/* where values for lseek(2) */
+#define	SEEK_SET	0	/* set file offset to offset */
+#define	SEEK_CUR	1	/* set file offset to current plus offset */
+#define	SEEK_END	2	/* set file offset to EOF plus offset */
+
+/* 
+ * Device switch
+ */
+struct devsw {
+    const char	dv_name[8];
+    int		dv_type;		/* opaque type constant, arch-dependant */
+    int		(*dv_init)(void);	/* early probe call */
+    int		(*dv_strategy)(void *devdata, int rw, daddr_t blk, size_t size,
+			       char *buf, size_t *rsize);
+    int		(*dv_open)(struct open_file *f, ...);
+    int		(*dv_close)(struct open_file *f);
+    int		(*dv_ioctl)(struct open_file *f, u_long cmd, void *data);
+    void	(*dv_print)(int verbose);	/* print device information */
+    void	(*dv_cleanup)(void);
+};
+
+/*
+ * libstand-supplied device switch
+ */
+extern struct devsw netdev;
+
+extern int errno;
+
+struct open_file {
+    int			f_flags;	/* see F_* below */
+    struct devsw	*f_dev;		/* pointer to device operations */
+    void		*f_devdata;	/* device specific data */
+    struct fs_ops	*f_ops;		/* pointer to file system operations */
+    void		*f_fsdata;	/* file system specific data */
+    off_t		f_offset;	/* current file offset */
+    char		*f_rabuf;	/* readahead buffer pointer */
+    size_t		f_ralen;	/* valid data in readahead buffer */
+    off_t		f_raoffset;	/* consumer offset in readahead buffer */
+#define SOPEN_RASIZE	512
+};
+
+#define	SOPEN_MAX	8
+extern struct open_file files[];
+
+/* f_flags values */
+#define	F_READ		0x0001	/* file opened for reading */
+#define	F_WRITE		0x0002	/* file opened for writing */
+#define	F_RAW		0x0004	/* raw device open - no file system */
+#define F_NODEV		0x0008	/* network open - no device */
+
+#define isascii(c)	(((c) & ~0x7F) == 0)
+
+static __inline int isupper(int c)
+{
+    return c >= 'A' && c <= 'Z';
+}
+
+static __inline int islower(int c)
+{
+    return c >= 'a' && c <= 'z';
+}
+
+static __inline int isspace(int c)
+{
+    return c == ' ' || (c >= 0x9 && c <= 0xd);
+}
+
+static __inline int isdigit(int c)
+{
+    return c >= '0' && c <= '9';
+}
+
+static __inline int isxdigit(int c)
+{
+    return isdigit(c) || (c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F');
+}
+
+static __inline int isalpha(int c)
+{
+    return isupper(c) || islower(c);
+}
+
+static __inline int isalnum(int c)
+{
+    return isalpha(c) || isdigit(c);
+}
+
+static __inline int toupper(int c)
+{
+    return islower(c) ? c - 'a' + 'A' : c;
+}
+
+static __inline int tolower(int c)
+{
+    return isupper(c) ? c - 'A' + 'a' : c;
+}
+
+/* sbrk emulation */
+extern void	setheap(void *base, void *top);
+extern char	*sbrk(int incr);
+
+/* Matt Dillon's zalloc/zmalloc */
+extern void	*malloc(size_t bytes);
+extern void	free(void *ptr);
+/*#define free(p)	{CHK("free %p", p); free(p);} */ /* use for catching guard violations */
+extern void	*calloc(size_t n1, size_t n2);
+extern void	*realloc(void *ptr, size_t size);
+extern void	*reallocf(void *ptr, size_t size);
+extern void	mallocstats(void);
+#ifdef __alpha__
+extern void	free_region(void *start, void *end);
+#endif
+
+/* disklabel support (undocumented, may be junk) */
+struct		disklabel;
+extern char	*getdisklabel(const char *, struct disklabel *);
+
+extern int	printf(const char *fmt, ...) __printflike(1, 2);
+extern void	vprintf(const char *fmt, __va_list);
+extern int	sprintf(char *buf, const char *cfmt, ...) __printflike(2, 3);
+extern void	vsprintf(char *buf, const char *cfmt, __va_list);
+
+extern void	twiddle(void);
+
+extern void	ngets(char *, int);
+#define gets(x)	ngets((x), 0)
+extern int	fgetstr(char *buf, int size, int fd);
+
+extern int	open(const char *, int);
+#define	O_RDONLY	0x0
+#define O_WRONLY	0x1
+#define O_RDWR		0x2
+extern int	close(int);
+extern void	closeall(void);
+extern ssize_t	read(int, void *, size_t);
+extern ssize_t	write(int, void *, size_t);
+extern struct	dirent *readdirfd(int);
+
+extern void	srandom(u_long seed);
+extern u_long	random(void);
+    
+/* imports from stdlib, locally modified */
+extern long	strtol(const char *, char **, int);
+extern char	*optarg;			/* getopt(3) external variables */
+extern int	optind, opterr, optopt, optreset;
+extern int	getopt(int, char * const [], const char *);
+
+/* pager.c */
+extern void	pager_open(void);
+extern void	pager_close(void);
+extern int	pager_output(const char *lines);
+extern int	pager_file(const char *fname);
+
+/* No signal state to preserve */
+#define setjmp	_setjmp
+#define longjmp	_longjmp
+
+/* environment.c */
+#define EV_DYNAMIC	(1<<0)		/* value was dynamically allocated, free if changed/unset */
+#define EV_VOLATILE	(1<<1)		/* value is volatile, make a copy of it */
+#define EV_NOHOOK	(1<<2)		/* don't call hook when setting */
+
+struct env_var;
+typedef char	*(ev_format_t)(struct env_var *ev);
+typedef int	(ev_sethook_t)(struct env_var *ev, int flags,
+		    const void *value);
+typedef int	(ev_unsethook_t)(struct env_var *ev);
+
+struct env_var
+{
+    char		*ev_name;
+    int			ev_flags;
+    void		*ev_value;
+    ev_sethook_t	*ev_sethook;
+    ev_unsethook_t	*ev_unsethook;
+    struct env_var	*ev_next, *ev_prev;
+};
+extern struct env_var	*environ;
+
+extern struct env_var	*env_getenv(const char *name);
+extern int		env_setenv(const char *name, int flags,
+				   const void *value, ev_sethook_t sethook,
+				   ev_unsethook_t unsethook);
+extern char		*getenv(const char *name);
+extern int		setenv(const char *name, const char *value,
+			       int overwrite);
+extern int		putenv(const char *string);
+extern int		unsetenv(const char *name);
+
+extern ev_sethook_t	env_noset;		/* refuse set operation */
+extern ev_unsethook_t	env_nounset;		/* refuse unset operation */
+
+/* BCD conversions (undocumented) */
+extern u_char const	bcd2bin_data[];
+extern u_char const	bin2bcd_data[];
+extern char const	hex2ascii_data[];
+
+#define	bcd2bin(bcd)	(bcd2bin_data[bcd])
+#define	bin2bcd(bin)	(bin2bcd_data[bin])
+#define	hex2ascii(hex)	(hex2ascii_data[hex])
+
+/* min/max (undocumented) */
+static __inline int imax(int a, int b) { return (a > b ? a : b); }
+static __inline int imin(int a, int b) { return (a < b ? a : b); }
+static __inline long lmax(long a, long b) { return (a > b ? a : b); }
+static __inline long lmin(long a, long b) { return (a < b ? a : b); }
+static __inline u_int max(u_int a, u_int b) { return (a > b ? a : b); }
+static __inline u_int min(u_int a, u_int b) { return (a < b ? a : b); }
+static __inline quad_t qmax(quad_t a, quad_t b) { return (a > b ? a : b); }
+static __inline quad_t qmin(quad_t a, quad_t b) { return (a < b ? a : b); }
+static __inline u_long ulmax(u_long a, u_long b) { return (a > b ? a : b); }
+static __inline u_long ulmin(u_long a, u_long b) { return (a < b ? a : b); }
+
+/* swaps (undocumented, useful?) */
+#ifdef __i386__
+extern u_int32_t	bswap32(u_int32_t x);
+extern u_int64_t	bswap64(u_int64_t x);
+#endif
+
+/* null functions for device/filesystem switches (undocumented) */
+extern int	nodev(void);
+extern int	noioctl(struct open_file *, u_long, void *);
+extern void	nullsys(void);
+
+extern int	null_open(const char *path, struct open_file *f);
+extern int	null_close(struct open_file *f);
+extern int	null_read(struct open_file *f, void *buf, size_t size, size_t *resid);
+extern int	null_write(struct open_file *f, void *buf, size_t size, size_t *resid);
+extern off_t	null_seek(struct open_file *f, off_t offset, int where);
+extern int	null_stat(struct open_file *f, struct stat *sb);
+extern int	null_readdir(struct open_file *f, struct dirent *d);
+
+
+/* 
+ * Machine dependent functions and data, must be provided or stubbed by 
+ * the consumer 
+ */
+extern int		getchar(void);
+extern int		ischar(void);
+extern void		putchar(int);
+extern int		devopen(struct open_file *, const char *, const char **);
+extern int		devclose(struct open_file *f);
+extern void		panic(const char *, ...) __dead2;
+extern struct fs_ops	*file_system[];
+extern struct devsw	*devsw[];
+
+/*
+ * Expose byteorder(3) functions.
+ */
+#ifndef _BYTEORDER_PROTOTYPED
+#define	_BYTEORDER_PROTOTYPED
+extern uint32_t		htonl(uint32_t);
+extern uint16_t		htons(uint16_t);
+extern uint32_t		ntohl(uint32_t);
+extern uint16_t		ntohs(uint16_t);
+#endif
+
+#ifndef _BYTEORDER_FUNC_DEFINED
+#define	_BYTEORDER_FUNC_DEFINED
+#define	htonl(x)	__htonl(x)
+#define	htons(x)	__htons(x)
+#define	ntohl(x)	__ntohl(x)
+#define	ntohs(x)	__ntohs(x)
+#endif
+
+void *Malloc(size_t, const char *, int);
+void *Calloc(size_t, size_t, const char *, int);
+void *Realloc(void *, size_t, const char *, int);
+void Free(void *, const char *, int);
+
+#if 1
+#define malloc(x)	Malloc(x, __FILE__, __LINE__)
+#define calloc(x, y)	Calloc(x, y, __FILE__, __LINE__)
+#define free(x)		Free(x, __FILE__, __LINE__)
+#define realloc(x, y)	Realloc(x, y, __FILE__, __LINE__)
+#else
+#define malloc(x)	Malloc(x, NULL, 0)
+#define calloc(x, y)	Calloc(x, y, NULL, 0)
+#define free(x)		Free(x, NULL, 0)
+#define realloc(x, y)	Realloc(x, y, NULL, 0)
+#endif
diff -u -r -N pdksh-5.2.14/timeb.h pdksh-aros/timeb.h
--- pdksh-5.2.14/timeb.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/timeb.h	Tue Mar 30 22:02:59 2004
@@ -0,0 +1,61 @@
+/*-
+ * Copyright (c) 1991, 1993
+ *	The Regents of the University of California.  All rights reserved.
+ * (c) UNIX System Laboratories, Inc.
+ * All or some portions of this file are derived from material licensed
+ * to the University of California by American Telephone and Telegraph
+ * Co. or Unix System Laboratories, Inc. and are reproduced herein with
+ * the permission of UNIX System Laboratories, Inc.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *	This product includes software developed by the University of
+ *	California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ *	@(#)timeb.h	8.2 (Berkeley) 1/21/94
+ * $FreeBSD: src/sys/sys/timeb.h,v 1.8 2002/03/19 20:18:41 alfred Exp $
+ */
+
+#ifndef _SYS_TIMEB_H_
+#define _SYS_TIMEB_H_
+
+/* The ftime(2) system call structure -- deprecated. */
+struct timeb {
+	time_t	time;			/* seconds since the Epoch */
+	unsigned short millitm;		/* + milliseconds since the Epoch */
+	short	timezone;		/* minutes west of CUT */
+	short	dstflag;		/* DST == non-zero */
+};
+
+#ifndef _KERNEL
+#include <sys/cdefs.h>
+
+__BEGIN_DECLS
+int ftime(struct timeb *);
+__END_DECLS
+#endif /* _KERNEL */
+
+#endif
diff -u -r -N pdksh-5.2.14/times.h pdksh-aros/times.h
--- pdksh-5.2.14/times.h	Wed Dec 31 19:00:00 1969
+++ pdksh-aros/times.h	Tue Mar 30 20:25:24 2004
@@ -0,0 +1,66 @@
+/*-
+ * Copyright (c) 1990, 1993
+ *	The Regents of the University of California.  All rights reserved.
+ * (c) UNIX System Laboratories, Inc.
+ * All or some portions of this file are derived from material licensed
+ * to the University of California by American Telephone and Telegraph
+ * Co. or Unix System Laboratories, Inc. and are reproduced herein with
+ * the permission of UNIX System Laboratories, Inc.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *	This product includes software developed by the University of
+ *	California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ *
+ *	@(#)times.h	8.4 (Berkeley) 1/21/94
+ * $FreeBSD: src/sys/sys/times.h,v 1.8 2002/08/21 16:20:01 mike Exp $
+ */
+
+#ifndef	_SYS_TIMES_H_
+#define	_SYS_TIMES_H_
+
+#include <sys/_types.h>
+
+#ifndef _CLOCK_T_DECLARED
+typedef	__clock_t	clock_t;
+#define	_CLOCK_T_DECLARED
+#endif
+
+struct tms {
+	clock_t tms_utime;	/* User CPU time */
+	clock_t tms_stime;	/* System CPU time */
+	clock_t tms_cutime;	/* User CPU time of terminated child procs */
+	clock_t tms_cstime;	/* System CPU time of terminated child procs */
+};
+
+#ifndef _KERNEL
+#include <sys/cdefs.h>
+
+__BEGIN_DECLS
+clock_t	times(struct tms *);
+__END_DECLS
+#endif
+#endif /* !_SYS_TIMES_H_ */
diff -u -r -N pdksh-5.2.14/trap.c pdksh-aros/trap.c
--- pdksh-5.2.14/trap.c	Tue Jan 12 09:35:20 1999
+++ pdksh-aros/trap.c	Tue Mar 30 21:17:20 2004
@@ -68,6 +68,7 @@
 alarm_catcher(sig)
 	int sig;
 {
+/* AROS
 	if (ksh_tmout_state == TMOUT_READING) {
 		int left = alarm(0);
 
@@ -77,7 +78,8 @@
 		} else
 			alarm(left);
 	}
-	return RETSIGVAL;
+	return RETSIGVAL; */
+	return 0;
 }
 #endif /* KSH */
 
diff -u -r -N pdksh-5.2.14/tty.c pdksh-aros/tty.c
--- pdksh-5.2.14/tty.c	Wed Dec 16 14:34:26 1998
+++ pdksh-aros/tty.c	Tue Mar 30 22:49:29 2004
@@ -10,9 +10,12 @@
 	TTY_state *ts;
 {
 	int ret;
-
+/* AROS */
+#define HAVE_TERMIOS_H 
 # ifdef HAVE_TERMIOS_H
-	ret = tcgetattr(fd, ts);
+/* AROS */
+/*	ret = tcgetattr(fd, ts); */
+	ret = 1;
 # else /* HAVE_TERIOS_H */
 #  ifdef HAVE_TERMIO_H
 	ret = ioctl(fd, TCGETA, ts);
@@ -43,7 +46,9 @@
 	int ret = 0;
 
 # ifdef HAVE_TERMIOS_H
-	ret = tcsetattr(fd, TCSADRAIN, ts);
+/* AROS */
+/*	ret = tcsetattr(fd, TCSADRAIN, ts); */
+	ret = 0;
 # else /* HAVE_TERIOS_H */
 #  ifdef HAVE_TERMIO_H
 #   ifndef TCSETAW				/* e.g. Cray-2 */
diff -u -r -N pdksh-5.2.14/tty.h pdksh-aros/tty.h
--- pdksh-5.2.14/tty.h	Tue Oct  8 13:27:21 1996
+++ pdksh-aros/tty.h	Tue Mar 30 21:09:00 2004
@@ -70,8 +70,33 @@
 #   include <sgtty.h>
 #   define TIOCSETN	TIOCSETP
 #  else
-#   include <sys/ioctl.h>
+#   include "ioctl.h"
 #  endif
+/* For AROS from Minix */
+struct sgttyb {
+  char sg_ispeed;  /* input speed */
+  char sg_ospeed;  /* output speed */
+  char sg_erase;  /* erase character */
+  char sg_kill;   /* kill character */
+  int  sg_flags;  /* mode flags */
+};
+
+struct tchars {
+  char t_intrc;   /* SIGINT char */
+  char t_quitc;   /* SIGQUIT char */
+  char t_startc;  /* start output (initially CTRL-Q) */
+  char t_stopc;   /* stop output (initially CTRL-S) */
+  char t_eofc;   /* EOF (initially CTRL-D) */
+  char t_brkc;   /* input delimiter (like nl) */
+};
+
+
+#define  ECHO 0x0008 /* echo input */
+#define  CBREAK 0x0002 /* enable cbreak mode */
+#define TIOCGETP  _IOR(t, 8, struct sgttyb) /* Get/Set parameters */
+#define TCSADRAIN 1
+
+/* End AROS */
 typedef struct {
 	struct sgttyb	sgttyb;
 #  ifdef TIOCGATC
